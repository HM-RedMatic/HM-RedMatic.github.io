<!DOCTYPE html>
<html lang="de-DE">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Einfacher Flow zum Schalten einer Lampe mittels Taster | RedMatic</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.71957ad0.css" as="style"><link rel="preload" href="/assets/js/app.6e49cc76.js" as="script"><link rel="preload" href="/assets/js/2.c7572858.js" as="script"><link rel="preload" href="/assets/js/5.057cfdf0.js" as="script"><link rel="preload" href="/assets/js/66.50e9879f.js" as="script"><link rel="prefetch" href="/assets/js/10.370891fb.js"><link rel="prefetch" href="/assets/js/100.ebba27a8.js"><link rel="prefetch" href="/assets/js/101.26a83898.js"><link rel="prefetch" href="/assets/js/102.42d8b92e.js"><link rel="prefetch" href="/assets/js/103.acff4d0e.js"><link rel="prefetch" href="/assets/js/104.723e76ca.js"><link rel="prefetch" href="/assets/js/105.6800050d.js"><link rel="prefetch" href="/assets/js/106.dbedac07.js"><link rel="prefetch" href="/assets/js/107.433fb62b.js"><link rel="prefetch" href="/assets/js/108.086301df.js"><link rel="prefetch" href="/assets/js/109.cda762a8.js"><link rel="prefetch" href="/assets/js/11.15b86789.js"><link rel="prefetch" href="/assets/js/110.041c02ba.js"><link rel="prefetch" href="/assets/js/111.37b9fa07.js"><link rel="prefetch" href="/assets/js/12.0617ac04.js"><link rel="prefetch" href="/assets/js/13.457dffc3.js"><link rel="prefetch" href="/assets/js/14.b86c5f57.js"><link rel="prefetch" href="/assets/js/15.aa479949.js"><link rel="prefetch" href="/assets/js/16.862e88e9.js"><link rel="prefetch" href="/assets/js/17.ce310baa.js"><link rel="prefetch" href="/assets/js/18.8d10cbba.js"><link rel="prefetch" href="/assets/js/19.c7b5e7c6.js"><link rel="prefetch" href="/assets/js/20.4e0e1085.js"><link rel="prefetch" href="/assets/js/21.1a8d1e89.js"><link rel="prefetch" href="/assets/js/22.4f484a52.js"><link rel="prefetch" href="/assets/js/23.293e3163.js"><link rel="prefetch" href="/assets/js/24.5dcc5c56.js"><link rel="prefetch" href="/assets/js/25.12eec4f2.js"><link rel="prefetch" href="/assets/js/26.f6f4063c.js"><link rel="prefetch" href="/assets/js/27.a9ec623a.js"><link rel="prefetch" href="/assets/js/28.bacd5a42.js"><link rel="prefetch" href="/assets/js/29.7b465ef0.js"><link rel="prefetch" href="/assets/js/3.fefb63a3.js"><link rel="prefetch" href="/assets/js/30.ba3e19da.js"><link rel="prefetch" href="/assets/js/31.2e29fe01.js"><link rel="prefetch" href="/assets/js/32.c9a889aa.js"><link rel="prefetch" href="/assets/js/33.38b1cadd.js"><link rel="prefetch" href="/assets/js/34.5c14c4ec.js"><link rel="prefetch" href="/assets/js/35.26a3ac36.js"><link rel="prefetch" href="/assets/js/36.05eb203c.js"><link rel="prefetch" href="/assets/js/37.49fc2e1e.js"><link rel="prefetch" href="/assets/js/38.e1154847.js"><link rel="prefetch" href="/assets/js/39.ba4e1eb5.js"><link rel="prefetch" href="/assets/js/4.7dd2b66f.js"><link rel="prefetch" href="/assets/js/40.a6ff0e13.js"><link rel="prefetch" href="/assets/js/41.188ab24f.js"><link rel="prefetch" href="/assets/js/42.cd0cce71.js"><link rel="prefetch" href="/assets/js/43.9b32c780.js"><link rel="prefetch" href="/assets/js/44.6abc643c.js"><link rel="prefetch" href="/assets/js/45.58296594.js"><link rel="prefetch" href="/assets/js/46.bd201890.js"><link rel="prefetch" href="/assets/js/47.1bdfbf89.js"><link rel="prefetch" href="/assets/js/48.f40f39a2.js"><link rel="prefetch" href="/assets/js/49.badc649f.js"><link rel="prefetch" href="/assets/js/50.d19262d0.js"><link rel="prefetch" href="/assets/js/51.fc622255.js"><link rel="prefetch" href="/assets/js/52.6dc73916.js"><link rel="prefetch" href="/assets/js/53.a9252432.js"><link rel="prefetch" href="/assets/js/54.43bc18a2.js"><link rel="prefetch" href="/assets/js/55.72544862.js"><link rel="prefetch" href="/assets/js/56.5c2f9839.js"><link rel="prefetch" href="/assets/js/57.0a17e572.js"><link rel="prefetch" href="/assets/js/58.310da15d.js"><link rel="prefetch" href="/assets/js/59.51aa300a.js"><link rel="prefetch" href="/assets/js/6.0b7c5b87.js"><link rel="prefetch" href="/assets/js/60.e8c78387.js"><link rel="prefetch" href="/assets/js/61.9ceae67a.js"><link rel="prefetch" href="/assets/js/62.ad42bf79.js"><link rel="prefetch" href="/assets/js/63.75704d8a.js"><link rel="prefetch" href="/assets/js/64.365e5d3c.js"><link rel="prefetch" href="/assets/js/65.6187df17.js"><link rel="prefetch" href="/assets/js/67.bd7d0008.js"><link rel="prefetch" href="/assets/js/68.21130725.js"><link rel="prefetch" href="/assets/js/69.70826e4f.js"><link rel="prefetch" href="/assets/js/7.bbb2fc40.js"><link rel="prefetch" href="/assets/js/70.e821e255.js"><link rel="prefetch" href="/assets/js/71.43c46f7b.js"><link rel="prefetch" href="/assets/js/72.fdd9882c.js"><link rel="prefetch" href="/assets/js/73.b3f9cb62.js"><link rel="prefetch" href="/assets/js/74.8c03db03.js"><link rel="prefetch" href="/assets/js/75.865bc233.js"><link rel="prefetch" href="/assets/js/76.4240dba2.js"><link rel="prefetch" href="/assets/js/77.0c62181c.js"><link rel="prefetch" href="/assets/js/78.28d14982.js"><link rel="prefetch" href="/assets/js/79.30e51444.js"><link rel="prefetch" href="/assets/js/8.3453e2ab.js"><link rel="prefetch" href="/assets/js/80.42684a82.js"><link rel="prefetch" href="/assets/js/81.1f1adbaf.js"><link rel="prefetch" href="/assets/js/82.72ae0b05.js"><link rel="prefetch" href="/assets/js/83.837235c9.js"><link rel="prefetch" href="/assets/js/84.b59731e4.js"><link rel="prefetch" href="/assets/js/85.520a5a8b.js"><link rel="prefetch" href="/assets/js/86.35f47343.js"><link rel="prefetch" href="/assets/js/87.02ba76b1.js"><link rel="prefetch" href="/assets/js/88.cba15d62.js"><link rel="prefetch" href="/assets/js/89.0ed0aefa.js"><link rel="prefetch" href="/assets/js/9.2479c717.js"><link rel="prefetch" href="/assets/js/90.b115f6b8.js"><link rel="prefetch" href="/assets/js/91.e1db88dd.js"><link rel="prefetch" href="/assets/js/92.74b2dddb.js"><link rel="prefetch" href="/assets/js/93.50b54ff6.js"><link rel="prefetch" href="/assets/js/94.5566f075.js"><link rel="prefetch" href="/assets/js/95.3a14d155.js"><link rel="prefetch" href="/assets/js/96.4efd34cd.js"><link rel="prefetch" href="/assets/js/97.0f68cf98.js"><link rel="prefetch" href="/assets/js/98.8acd7862.js"><link rel="prefetch" href="/assets/js/99.2ffeeba3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.71957ad0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo-plain.png" alt="RedMatic" class="logo"> <span class="site-name can-hide">RedMatic</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doku/" class="nav-link">Doku</a></div><div class="nav-item"><a href="/nodes/" class="nav-link">Nodes</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">Wiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://homematic-forum.de/forum/viewforum.php?f=77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/groups/Homematic.Freunde" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook Gruppe
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/homematicuser/shared_invite/enQtNDgyNDM2OTkyMDA2LWY1YjY0NTE0NmY0OWM3YWUzMzAzMTgxYmRjMTMyOWE3NjkxNDdlMDY5ZjlhYzM5Nzg2N2U2YjdmNzNlYWNhNTU" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/HM-RedMatic/RedMatic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="theme-toggler" data-v-6649375f><a data-v-6649375f><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon" data-v-6649375f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-6649375f></path></svg></a></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doku/" class="nav-link">Doku</a></div><div class="nav-item"><a href="/nodes/" class="nav-link">Nodes</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">Wiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://homematic-forum.de/forum/viewforum.php?f=77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/groups/Homematic.Freunde" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook Gruppe
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/homematicuser/shared_invite/enQtNDgyNDM2OTkyMDA2LWY1YjY0NTE0NmY0OWM3YWUzMzAzMTgxYmRjMTMyOWE3NjkxNDdlMDY5ZjlhYzM5Nzg2N2U2YjdmNzNlYWNhNTU" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/HM-RedMatic/RedMatic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Wiki</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Administration</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Beispiel Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Erweiterungen</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Nutzung</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Sonstiges</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>User Flows</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/wiki/combine-logic-node-for-toggle-state.html" class="sidebar-link">A simple Flow to toggle an actor with a single button</a></li><li><a href="/wiki/Flow-within-time.html" class="sidebar-link">Ausführen von Funktionen in definierten Zeitfenstern</a></li><li><a href="/wiki/Flow-to-calculate-german-holidays.html" class="sidebar-link">Deutsche Feiertage</a></li><li><a href="/wiki/Flow-simple-toggle-light.html" class="active sidebar-link">Einfacher Flow zum Schalten einer Lampe</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/Flow-simple-toggle-light.html#inhalt" class="sidebar-link">Inhalt</a></li><li class="sidebar-sub-header"><a href="/wiki/Flow-simple-toggle-light.html#vorwort" class="sidebar-link">Vorwort</a></li><li class="sidebar-sub-header"><a href="/wiki/Flow-simple-toggle-light.html#vergleich-mit-einem-ccu-programm" class="sidebar-link">Vergleich mit einem CCU Programm</a></li><li class="sidebar-sub-header"><a href="/wiki/Flow-simple-toggle-light.html#redmatic-flow" class="sidebar-link">RedMatic Flow</a></li></ul></li><li><a href="/wiki/Flow-Syslog.html" class="sidebar-link">Fehlerüberwachung der CCU</a></li><li><a href="/wiki/Harmony-Activities-mit-Homekit-nutzen.html" class="sidebar-link">Harmony Activities mit Homekit nutzen</a></li><li><a href="/wiki/Open-Workaround-für-HM-Sec-Key.html" class="sidebar-link">Homekit - Öffnen einer Tür mit Keymatic HM-Sec-Key-(S)</a></li><li><a href="/wiki/Nachrichten-an-Telegram-versenden.html" class="sidebar-link">Nachrichten an Telegram versenden</a></li><li><a href="/wiki/Pillenförmige-Schalter-synchron-mit-globalen-Variablen.html" class="sidebar-link">Pillenförmige-Schalter-synchron-mit-globalen-Variablen</a></li><li><a href="/wiki/Rollladen-und-Jalousiesteuerung.html" class="sidebar-link">Rollladen und Jalousiesteuerung</a></li><li><a href="/wiki/Schalter-mit-Status-als-Badge-Ersatz.html" class="sidebar-link">Schalter-mit-Status-als-Badge-Ersatz</a></li><li><a href="/wiki/Steuerung-Miele.html" class="sidebar-link">Steuerung-Miele</a></li><li><a href="/wiki/Flow-Influx.html" class="sidebar-link">Werte in InfluxDB speichern</a></li><li><a href="/wiki/Zwischen-zwei-Zeitpunkten-jede-halbe-Stunde-einen-Inject-generieren.html" class="sidebar-link">Zwischen zwei Zeitpunkten jede halbe Stunde einen Inject generieren</a></li><li><a href="/wiki/Flow-speak-text-on-Google.html" class="sidebar-link">speak text on Google Home or Chromecast</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Von Usern bereitgestellte Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Weitere</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content default"><h1 id="einfacher-flow-zum-schalten-einer-lampe-mittels-taster"><a href="#einfacher-flow-zum-schalten-einer-lampe-mittels-taster" aria-hidden="true" class="header-anchor">#</a> Einfacher Flow zum Schalten einer Lampe mittels Taster</h1> <p>Möchte man mittels eines Tastendrucks ein Licht ein und mit dem nächsten Tastendruck Ausschalten, ist das einfach möglich:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44587420-2ebe2d00-a7b3-11e8-8f43-9019480b0600.png" alt="image"></p> <h2 id="inhalt"><a href="#inhalt" aria-hidden="true" class="header-anchor">#</a> Inhalt</h2> <ul><li><a href="#Vorwort">Vorwort</a></li> <li><a href="#vergleich-mit-einem-ccu-programm">Vergleich mit einem CCU Programm</a></li> <li><a href="#node-red-flow">Node Red Flow</a> <ul><li><a href="#start">Start</a></li> <li><a href="#trigger-des-flow">Trigger des Flow</a> <ul><li><a href="#konfiguration-des-trigger">Konfiguration des Trigger</a></li></ul></li> <li><a href="#ablauf-steuern">Ablauf steuern</a></li> <li><a href="#ablauf-verandern">Ablauf verändern</a></li> <li><a href="#aktion-ausfuhren">Aktion ausführen</a></li> <li><a href="#abschluss">Abschluss</a></li></ul></li></ul> <h2 id="vorwort"><a href="#vorwort" aria-hidden="true" class="header-anchor">#</a> Vorwort</h2> <p>Das Problem ließe sich sicherlich auf den ersten Blick einfacher mit einem Function Node und etwas JavaScript lösen. Die Empfehlung von IBM (der Firma hinter Node-Red) ist es möglichst auf die Function Nodes zu verzichten. Gerade bei solch einfachen Beispielen sind die Standard Nodes vorzuziehen.</p> <p>Die Gründe dafür sind:</p> <ul><li>Die Funktion eines Flows erschließt sich viel einfacher mit der Verwendung der Standard Nodes
<ul><li>Auch wenn die Flows damit vielleicht nicht so aufgeräumt wirken, kann man die Funktion später viel einfacher nachvollziehen.</li></ul></li> <li>Die <em>Function Nodes</em> haben gegenüber den Standard Nodes eine schlechtere Performance, da der Javascript Code in einer Sandbox ausgeführt wird.</li></ul> <h2 id="vergleich-mit-einem-ccu-programm"><a href="#vergleich-mit-einem-ccu-programm" aria-hidden="true" class="header-anchor">#</a> Vergleich mit einem CCU Programm</h2> <p>Wenn man das Problem mittels CCU Programm lösen möchte, hat man vermutlich ein Programm in dieser Art erstellt:</p> <p><img src="https://user-images.githubusercontent.com/12692680/45623821-de23b200-ba88-11e8-94ee-053888e7bac5.png" alt="image"></p> <p>Hier wird das Programm durch einen kurzen Tastendruck getriggert und abhängig vom aktuellen Zustand der Lampe (nur prüfen) diese entweder ein- oder ausgeschaltet.</p> <p>In Node Red ist der Flow ähnlich:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44587420-2ebe2d00-a7b3-11e8-8f43-9019480b0600.png" alt="image"></p> <h2 id="redmatic-flow"><a href="#redmatic-flow" aria-hidden="true" class="header-anchor">#</a> RedMatic Flow</h2> <h3 id="start"><a href="#start" aria-hidden="true" class="header-anchor">#</a> Start</h3> <p>Als erstes sollte man sich die <a href="Node-RED">Node-RED Grundlagen</a> durchlesen. Danach kann es auch schon losgehen.</p> <h3 id="trigger-des-flow"><a href="#trigger-des-flow" aria-hidden="true" class="header-anchor">#</a> Trigger des Flow</h3> <p>Als erstes benötigt man den Trigger für den Flow. Dieser gibt das Event, welches ein Ereignis auslösen soll.</p> <p>Wenn dieser Event durch eine Taste eines Homematic Gerätes ausgelöst werden soll, nimmt man dafür in der Palette den Value Node:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44587497-67f69d00-a7b3-11e8-9284-9b5b022cec19.png" alt="image"></p> <p>Diesen platziert man einfach in den Arbeitsbereitch und klickt ihn doppelt:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44587735-1dc1eb80-a7b4-11e8-860f-d5058af7432c.png" alt="image"></p> <h4 id="konfiguration-des-trigger"><a href="#konfiguration-des-trigger" aria-hidden="true" class="header-anchor">#</a> Konfiguration des Trigger</h4> <p>Zum Konfigurieren sind die Felder wie folgt auszufüllen:</p> <ol><li>Als erstes muss man die Homematic Zentrale auswählen. Hat man noch keine konfiguriert, so ist mittels Stift Button daneben die Einstellungen zur Zentrale zu tätigen. (siehe auch <a href="CCU-Nodes">CCU Nodes</a> )</li> <li>Danach das Interface des Homematic Gerätes auswählen<br> <img src="https://user-images.githubusercontent.com/12692680/44587957-b3f61180-a7b4-11e8-886d-9aa9c8d3b5cf.png" alt="image"> Sollte die Drop Down Box leer sein (weil beispielsweise die CCU erst konfiguriert wurde), so muss man die Einstellungen des Node mit dem Done Button einmal schließen und neu öffnen.</li> <li>Hier wählt man den Kanal aus. Dabei kann man sehr einfach den Namen eintippen. Es öffnet sich eine Liste mit den möglichen Kanälen in der man den gewünschten auswählt.<br> <img src="https://user-images.githubusercontent.com/12692680/44588257-8198e400-a7b5-11e8-943d-fd55bdae5bca.png" alt="image"></li> <li>Der Datenpunkt des Kanals. Die folgenden Datenpunkte sind dabei die gebräuchlichsten:
<ul><li>Taster - kurzer Tastendruck: &quot;PRESS_SHORT&quot;</li> <li>Taster - langer Tastendruck: &quot;PRESS_LONG&quot;</li> <li>Status eines Aktors &quot;STATE&quot;
Für eine Taste als Trigger benötigen wir damit &quot;PRESS_SHORT&quot;</li></ul></li> <li>Mit dieser Einstellung kann man noch beeinflussen, wann die Node etwas ausgeben soll.<br> <img src="https://user-images.githubusercontent.com/12692680/44588712-c2452d00-a7b6-11e8-9fbf-db21c17b9fdd.png" alt="image"> <ul><li>Die Eigenschaft &quot;Nur geänderte Werte ausgeben&quot; kann man mit dem &quot;bei Änderung&quot;, bzw. &quot;bei Aktualisierung&quot; in den Homematic Programmen vergleichen. Ist der Haken bei &quot;Nur geänderte Werte ausgeben&quot; gesetzt, wird der Flow nur gestartet, wenn sich der Datenpunkt auf einen anderen Wert (Bsp. true auf False) ändern (&quot;bei Änderung&quot;). Ist der Haken nicht gesetzt, wird der Flow immer dann gestartet, wenn der Datenpunkt aktualisiert wird (&quot;bei Aktualisierung&quot;). Damit auch wenn sich der Wert selbst nicht ändert (Bsp. true auf true).
<ul><li>Wenn man sich unsicher ist, sollte der Haken gesetzt sein.</li></ul></li> <li>Manche Datenpunkte können während der Änderung auch fortlaufend ihren Status übermitteln. So kann beispielsweise gesteuert werden ob ein Rollladen während der Bewegung ständig seine Position übermittelt oder nur wenn er an seinem Endpukt angekommen ist.
<ul><li>Wenn man sich unsicher ist, sollte der Haken gesetzt sein.</li></ul></li> <li>Mit der EIgenschaft &quot;Beim Start letzten bekannten Wert ausgeben&quot; kann gesteuert werden ob beim Neu/Start von RedMatic der Flow mit dem letzten bekannten Wert getriggert werden soll.</li></ul></li></ol> <h3 id="ablauf-steuern"><a href="#ablauf-steuern" aria-hidden="true" class="header-anchor">#</a> Ablauf steuern</h3> <p>Als nächstes ziehen wir aus der Palette den Node, der den Ablauf steuern soll. In diesem Beispiel wollen wir abhängig vom Schaltzustand eines Lichtes dieses aus oder einschalten. Also muss sich in Abhängigkeit vom Zustand des Lichtes (aus oder ein) etwas anderes passieren.</p> <ul><li>Wenn Lampe aus ist, soll sie eingeschaltet werden</li> <li>Wenn Lampe ein ist, soll sie ausgeschaltet werden</li></ul> <p>Dafür benutzt man aus der Palette de switch Node.
Möchten wir den Flow in Abhängigkeit eines Datenpunktes eines Homematic Gerätes steuern nehmen wir den aus der CCU Palette:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44588995-970f0d80-a7b7-11e8-9bff-2d1da501345a.png" alt="image"></p> <p>Es gibt daneben noch den Standard switch node, den wir in diesem Beispiel nicht verwenden:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44588964-7ba40280-a7b7-11e8-8c02-6816a98a2122.png" alt="image"></p> <p>Hat man diesen auf den Arbeitsbereich gezogen, verbindet man den Ausgang des Trigger Nodes mit dem Eingang dieses switch Nodes.</p> <p>Als nächstes öffnet man die Einstellungen dieses switch Nodes.
Der obere Teil der Konfiguration ähnelt jetzt dem des value Nodes.</p> <p><img src="https://user-images.githubusercontent.com/12692680/44589104-e5bca780-a7b7-11e8-9609-57bc04de5f42.png" alt="image">
Hier wählt man jetzt den Datenpunkt der Lampe aus, welche man schalten möchte.
Bei Property ist die &quot;value&quot; auszuwählen.</p> <p>Im unteren Teil kann man die Bedingungen einstellen:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44589627-4f898100-a7b9-11e8-878d-316b88b4e3e0.png" alt="image"></p> <ol><li>Über den Add Button kann man die verschiedenen Bedingungen hinzufügen. Da wir 2 verschiedene Wege gehen möchten, müssen wir 2 Wege hinzufügen.</li> <li>Für jeden dieser Wege kann man einstellen, unter welcher Bedingung er betreten werden soll. Die Bedingung &quot;otherwise&quot; trifft immer zu und sollte als letztes gewählt werden.</li> <li>Diese Einstellung ist sehr wichtig. In der Standard Einstellung steht diese auf &quot;checking all rules&quot;. Das bedeutet es wird jede Bedingung geprüft und der Flow an ihr weitergeführt. Für den &quot;otherwise&quot; zweig beispielsweise bedeutet das dieser immer weitergeführt wird, unabhängig von den anderen Bedingungen. Ist in dem Beispiel die Lampe eingeschaltet, geht es mit &quot;checking all rules&quot; sowohl bei &quot;is true&quot; als auch bei &quot;otherwise&quot; weiter. Will man eher eine Wenn-dann Bedingung ist diese Einstellung auf &quot;stopping after first match&quot; umzustellen.</li></ol> <p>Die Komplette Konfiguration kann wie folgt aussehen:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44590081-8a3fe900-a7ba-11e8-921f-e0ba6d4214c2.png" alt="image"></p> <h3 id="ablauf-verandern"><a href="#ablauf-verandern" aria-hidden="true" class="header-anchor">#</a> Ablauf verändern</h3> <p>Als nächstes möchten wir bestimmen was an den beiden Ausgängen passieren soll:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44590167-c4a98600-a7ba-11e8-84fa-8c6c3b93f114.png" alt="image"></p> <p>Der obere wird ja betreten, wenn die Lampe an ist. Hier soll die Lampe ausgeschaltet werden.</p> <p>Dafür nehmen wir aus der Palette die change Node:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44590222-eefb4380-a7ba-11e8-8157-0387bdae5f8c.png" alt="image"></p> <p>Die steuernde Eigenschaft der weitergegebenen Nachricht ist die <code>msg.payload</code>. Um die Lampe auszuschalten muss diese auf &quot;false&quot; gesetzt werden. Der Node ist dafür bereits vorkonfiguriert:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44590285-12be8980-a7bb-11e8-89cf-0e96f34f5170.png" alt="image"></p> <p>Man wählt in der Liste einfach den Typ &quot;boolean&quot; aus und daneben false:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44590418-692bc800-a7bb-11e8-9773-824e69721a0f.png" alt="image"></p> <p>Diesen Node verbindet man mit dem oberen Ausgang des switch Nodes. Den Schritt wiederholt man mit dem underen Ausgang. Hierbei setzt man den payload jedoch auf true:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44590514-a3956500-a7bb-11e8-835e-76600cd1f17d.png" alt="image"></p> <h3 id="aktion-ausfuhren"><a href="#aktion-ausfuhren" aria-hidden="true" class="header-anchor">#</a> Aktion ausführen</h3> <p>Als Aktion soll ein Homematic Aktor geschaltet werden.
Dafür ist aus der Palette der value Node in den Arbeitsbereich zu ziehen.
Dieser ist genauso wie der Tasten Kanal für den Trigger zu konfigurieren, mit dem unterschied anstelle des Tasterkanals hier den Kanal des Aktors zu wählen.</p> <p>Als vorletzten Schritt verbindet man die beiden Change Nodes mit dem value Node:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44587420-2ebe2d00-a7b3-11e8-8f43-9019480b0600.png" alt="image"></p> <h3 id="abschluss"><a href="#abschluss" aria-hidden="true" class="header-anchor">#</a> Abschluss</h3> <p>Ist dies erledigt, wird diese Änderung aktiviert mittels des Deploy Buttons:</p> <p><img src="https://user-images.githubusercontent.com/12692680/44590937-962caa80-a7bc-11e8-9df3-592da55d8098.png" alt="image"></p></div> <!----> <!----> </div></div><div class="global-ui"></div></div>
    <script src="/assets/js/2.c7572858.js" defer></script><script src="/assets/js/5.057cfdf0.js" defer></script><script src="/assets/js/66.50e9879f.js" defer></script><script src="/assets/js/app.6e49cc76.js" defer></script>
  </body>
</html>
