<!DOCTYPE html>
<html lang="de-DE">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mittels Bewegungsmelder Licht einschalten | RedMatic</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.71957ad0.css" as="style"><link rel="preload" href="/assets/js/app.6e49cc76.js" as="script"><link rel="preload" href="/assets/js/2.c7572858.js" as="script"><link rel="preload" href="/assets/js/5.057cfdf0.js" as="script"><link rel="preload" href="/assets/js/68.21130725.js" as="script"><link rel="prefetch" href="/assets/js/10.370891fb.js"><link rel="prefetch" href="/assets/js/100.ebba27a8.js"><link rel="prefetch" href="/assets/js/101.26a83898.js"><link rel="prefetch" href="/assets/js/102.42d8b92e.js"><link rel="prefetch" href="/assets/js/103.acff4d0e.js"><link rel="prefetch" href="/assets/js/104.723e76ca.js"><link rel="prefetch" href="/assets/js/105.6800050d.js"><link rel="prefetch" href="/assets/js/106.dbedac07.js"><link rel="prefetch" href="/assets/js/107.433fb62b.js"><link rel="prefetch" href="/assets/js/108.086301df.js"><link rel="prefetch" href="/assets/js/109.cda762a8.js"><link rel="prefetch" href="/assets/js/11.15b86789.js"><link rel="prefetch" href="/assets/js/110.041c02ba.js"><link rel="prefetch" href="/assets/js/111.37b9fa07.js"><link rel="prefetch" href="/assets/js/12.0617ac04.js"><link rel="prefetch" href="/assets/js/13.457dffc3.js"><link rel="prefetch" href="/assets/js/14.b86c5f57.js"><link rel="prefetch" href="/assets/js/15.aa479949.js"><link rel="prefetch" href="/assets/js/16.862e88e9.js"><link rel="prefetch" href="/assets/js/17.ce310baa.js"><link rel="prefetch" href="/assets/js/18.8d10cbba.js"><link rel="prefetch" href="/assets/js/19.c7b5e7c6.js"><link rel="prefetch" href="/assets/js/20.4e0e1085.js"><link rel="prefetch" href="/assets/js/21.1a8d1e89.js"><link rel="prefetch" href="/assets/js/22.4f484a52.js"><link rel="prefetch" href="/assets/js/23.293e3163.js"><link rel="prefetch" href="/assets/js/24.5dcc5c56.js"><link rel="prefetch" href="/assets/js/25.12eec4f2.js"><link rel="prefetch" href="/assets/js/26.f6f4063c.js"><link rel="prefetch" href="/assets/js/27.a9ec623a.js"><link rel="prefetch" href="/assets/js/28.bacd5a42.js"><link rel="prefetch" href="/assets/js/29.7b465ef0.js"><link rel="prefetch" href="/assets/js/3.fefb63a3.js"><link rel="prefetch" href="/assets/js/30.ba3e19da.js"><link rel="prefetch" href="/assets/js/31.2e29fe01.js"><link rel="prefetch" href="/assets/js/32.c9a889aa.js"><link rel="prefetch" href="/assets/js/33.38b1cadd.js"><link rel="prefetch" href="/assets/js/34.5c14c4ec.js"><link rel="prefetch" href="/assets/js/35.26a3ac36.js"><link rel="prefetch" href="/assets/js/36.05eb203c.js"><link rel="prefetch" href="/assets/js/37.49fc2e1e.js"><link rel="prefetch" href="/assets/js/38.e1154847.js"><link rel="prefetch" href="/assets/js/39.ba4e1eb5.js"><link rel="prefetch" href="/assets/js/4.7dd2b66f.js"><link rel="prefetch" href="/assets/js/40.a6ff0e13.js"><link rel="prefetch" href="/assets/js/41.188ab24f.js"><link rel="prefetch" href="/assets/js/42.cd0cce71.js"><link rel="prefetch" href="/assets/js/43.9b32c780.js"><link rel="prefetch" href="/assets/js/44.6abc643c.js"><link rel="prefetch" href="/assets/js/45.58296594.js"><link rel="prefetch" href="/assets/js/46.bd201890.js"><link rel="prefetch" href="/assets/js/47.1bdfbf89.js"><link rel="prefetch" href="/assets/js/48.f40f39a2.js"><link rel="prefetch" href="/assets/js/49.badc649f.js"><link rel="prefetch" href="/assets/js/50.d19262d0.js"><link rel="prefetch" href="/assets/js/51.fc622255.js"><link rel="prefetch" href="/assets/js/52.6dc73916.js"><link rel="prefetch" href="/assets/js/53.a9252432.js"><link rel="prefetch" href="/assets/js/54.43bc18a2.js"><link rel="prefetch" href="/assets/js/55.72544862.js"><link rel="prefetch" href="/assets/js/56.5c2f9839.js"><link rel="prefetch" href="/assets/js/57.0a17e572.js"><link rel="prefetch" href="/assets/js/58.310da15d.js"><link rel="prefetch" href="/assets/js/59.51aa300a.js"><link rel="prefetch" href="/assets/js/6.0b7c5b87.js"><link rel="prefetch" href="/assets/js/60.e8c78387.js"><link rel="prefetch" href="/assets/js/61.9ceae67a.js"><link rel="prefetch" href="/assets/js/62.ad42bf79.js"><link rel="prefetch" href="/assets/js/63.75704d8a.js"><link rel="prefetch" href="/assets/js/64.365e5d3c.js"><link rel="prefetch" href="/assets/js/65.6187df17.js"><link rel="prefetch" href="/assets/js/66.50e9879f.js"><link rel="prefetch" href="/assets/js/67.bd7d0008.js"><link rel="prefetch" href="/assets/js/69.70826e4f.js"><link rel="prefetch" href="/assets/js/7.bbb2fc40.js"><link rel="prefetch" href="/assets/js/70.e821e255.js"><link rel="prefetch" href="/assets/js/71.43c46f7b.js"><link rel="prefetch" href="/assets/js/72.fdd9882c.js"><link rel="prefetch" href="/assets/js/73.b3f9cb62.js"><link rel="prefetch" href="/assets/js/74.8c03db03.js"><link rel="prefetch" href="/assets/js/75.865bc233.js"><link rel="prefetch" href="/assets/js/76.4240dba2.js"><link rel="prefetch" href="/assets/js/77.0c62181c.js"><link rel="prefetch" href="/assets/js/78.28d14982.js"><link rel="prefetch" href="/assets/js/79.30e51444.js"><link rel="prefetch" href="/assets/js/8.3453e2ab.js"><link rel="prefetch" href="/assets/js/80.42684a82.js"><link rel="prefetch" href="/assets/js/81.1f1adbaf.js"><link rel="prefetch" href="/assets/js/82.72ae0b05.js"><link rel="prefetch" href="/assets/js/83.837235c9.js"><link rel="prefetch" href="/assets/js/84.b59731e4.js"><link rel="prefetch" href="/assets/js/85.520a5a8b.js"><link rel="prefetch" href="/assets/js/86.35f47343.js"><link rel="prefetch" href="/assets/js/87.02ba76b1.js"><link rel="prefetch" href="/assets/js/88.cba15d62.js"><link rel="prefetch" href="/assets/js/89.0ed0aefa.js"><link rel="prefetch" href="/assets/js/9.2479c717.js"><link rel="prefetch" href="/assets/js/90.b115f6b8.js"><link rel="prefetch" href="/assets/js/91.e1db88dd.js"><link rel="prefetch" href="/assets/js/92.74b2dddb.js"><link rel="prefetch" href="/assets/js/93.50b54ff6.js"><link rel="prefetch" href="/assets/js/94.5566f075.js"><link rel="prefetch" href="/assets/js/95.3a14d155.js"><link rel="prefetch" href="/assets/js/96.4efd34cd.js"><link rel="prefetch" href="/assets/js/97.0f68cf98.js"><link rel="prefetch" href="/assets/js/98.8acd7862.js"><link rel="prefetch" href="/assets/js/99.2ffeeba3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.71957ad0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo-plain.png" alt="RedMatic" class="logo"> <span class="site-name can-hide">RedMatic</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doku/" class="nav-link">Doku</a></div><div class="nav-item"><a href="/nodes/" class="nav-link">Nodes</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">Wiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://homematic-forum.de/forum/viewforum.php?f=77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/groups/Homematic.Freunde" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook Gruppe
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/homematicuser/shared_invite/enQtNDgyNDM2OTkyMDA2LWY1YjY0NTE0NmY0OWM3YWUzMzAzMTgxYmRjMTMyOWE3NjkxNDdlMDY5ZjlhYzM5Nzg2N2U2YjdmNzNlYWNhNTU" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/HM-RedMatic/RedMatic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="theme-toggler" data-v-6649375f><a data-v-6649375f><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon" data-v-6649375f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-6649375f></path></svg></a></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doku/" class="nav-link">Doku</a></div><div class="nav-item"><a href="/nodes/" class="nav-link">Nodes</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">Wiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://homematic-forum.de/forum/viewforum.php?f=77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/groups/Homematic.Freunde" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook Gruppe
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/homematicuser/shared_invite/enQtNDgyNDM2OTkyMDA2LWY1YjY0NTE0NmY0OWM3YWUzMzAzMTgxYmRjMTMyOWE3NjkxNDdlMDY5ZjlhYzM5Nzg2N2U2YjdmNzNlYWNhNTU" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/HM-RedMatic/RedMatic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Wiki</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Administration</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Beispiel Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Erweiterungen</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Nutzung</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Sonstiges</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>User Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Von Usern bereitgestellte Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Weitere</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/wiki/Backup.html" class="sidebar-link">Backup</a></li><li><a href="/wiki/Berichterstattung.html" class="sidebar-link">Berichterstattung</a></li><li><a href="/wiki/CHANGE_HISTORY.html" class="sidebar-link">CHANGE_HISTORY</a></li><li><a href="/wiki/Context-Storage.html" class="sidebar-link">Context-Storage</a></li><li><a href="/wiki/Danke.html" class="sidebar-link">Danke</a></li><li><a href="/wiki/Discovery-von-Geräten-mit-Echo-Dot-v3-und-node-red-contrib-amazon-echo.html" class="sidebar-link">Discovery-von-Geräten-mit-Echo-Dot-v3-und-node-red-contrib-amazon-echo</a></li><li><a href="/wiki/Faq.html" class="sidebar-link">Faq</a></li><li><a href="/wiki/Firewall.html" class="sidebar-link">Firewall</a></li><li><a href="/wiki/Flow-switch-dimmer-based-on-Motion-detector-and-daytime.html" class="active sidebar-link">Flow-switch-dimmer-based-on-Motion-detector-and-daytime</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/Flow-switch-dimmer-based-on-Motion-detector-and-daytime.html#inhalt" class="sidebar-link">Inhalt</a></li><li class="sidebar-sub-header"><a href="/wiki/Flow-switch-dimmer-based-on-Motion-detector-and-daytime.html#uberblick" class="sidebar-link">Überblick</a></li><li class="sidebar-sub-header"><a href="/wiki/Flow-switch-dimmer-based-on-Motion-detector-and-daytime.html#vorwort" class="sidebar-link">Vorwort</a></li><li class="sidebar-sub-header"><a href="/wiki/Flow-switch-dimmer-based-on-Motion-detector-and-daytime.html#vorbereitung" class="sidebar-link">Vorbereitung</a></li><li class="sidebar-sub-header"><a href="/wiki/Flow-switch-dimmer-based-on-Motion-detector-and-daytime.html#redmatic-flow" class="sidebar-link">RedMatic Flow</a></li></ul></li><li><a href="/wiki/Homekit-Kamera-einbinden.html" class="sidebar-link">Homekit-Kamera-einbinden</a></li><li><a href="/wiki/Intro.html" class="sidebar-link">Intro</a></li><li><a href="/wiki/Misc-Nodes.html" class="sidebar-link">Misc-Nodes</a></li><li><a href="/wiki/Mosquitto-Authentifizierung-aktivieren.html" class="sidebar-link">Mosquitto-Authentifizierung-aktivieren</a></li><li><a href="/wiki/Node-RED-Smart-Home-Control.html" class="sidebar-link">Node-RED-Smart-Home-Control</a></li><li><a href="/wiki/Openweathermap.html" class="sidebar-link">Openweathermap</a></li><li><a href="/wiki/Projekte.html" class="sidebar-link">Projekte</a></li><li><a href="/wiki/Safe-Mode.html" class="sidebar-link">Safe-Mode</a></li><li><a href="/wiki/Sicherheit.html" class="sidebar-link">Sicherheit</a></li><li><a href="/wiki/Sprachausgabe-mit-node-red-contrib-alexa-remote2.html" class="sidebar-link">Sprachausgabe-mit-node-red-contrib-alexa-remote2</a></li><li><a href="/wiki/Telemetry.html" class="sidebar-link">Telemetry</a></li><li><a href="/wiki/ZigBee.html" class="sidebar-link">ZigBee</a></li><li><a href="/wiki/Zusätzliche-Wettericons-für-UI-Dashboard-in-Redmatic-verfügbar-machen.html" class="sidebar-link">Zusätzliche-Wettericons-für-UI-Dashboard-in-Redmatic-verfügbar-machen</a></li><li><a href="/wiki/en:Home.html" class="sidebar-link">en:Home</a></li><li><a href="/wiki/en:Intro.html" class="sidebar-link">en:Intro</a></li><li><a href="/wiki/flow-geraete-abfragen.html" class="sidebar-link">flow-geraete-abfragen</a></li><li><a href="/wiki/subFlow-withinTime.html" class="sidebar-link">subFlow-withinTime</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content default"><h1 id="mittels-bewegungsmelder-licht-einschalten"><a href="#mittels-bewegungsmelder-licht-einschalten" aria-hidden="true" class="header-anchor">#</a> Mittels Bewegungsmelder Licht einschalten</h1> <p>Möchte man mittels eines Bewegungsmelder ein Licht abhängig von der Helligkeit und der Tageszeit ein Licht mittels Dimmer einschalten, sind einige Flows nötig.</p> <h2 id="inhalt"><a href="#inhalt" aria-hidden="true" class="header-anchor">#</a> Inhalt</h2> <ul><li><a href="#%C3%9Cberblick">Überblick</a></li> <li><a href="#Vorwort">Vorwort</a></li> <li><a href="#Vorbereitung">Vorbereitung</a></li> <li><a href="#node-red-flow">Node Red Flow</a> <ul><li><a href="#start">Start</a></li> <li><a href="#trigger-des-flow">Trigger des Flow</a> <ul><li><a href="#konfiguration-des-trigger">Konfiguration des Trigger</a></li></ul></li> <li><a href="#ablauf-steuern">Ablauf steuern</a></li> <li><a href="#ablauf-verandern">Ablauf verändern</a></li> <li><a href="#aktion-ausfuhren">Aktion ausführen</a></li> <li><a href="#abschluss">Abschluss</a></li> <li><a href="#flows-als-download">Flows als Download</a></li></ul></li></ul> <h2 id="uberblick"><a href="#uberblick" aria-hidden="true" class="header-anchor">#</a> Überblick</h2> <p>Klassifizierung der Tageszeit:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48412589-66e76300-e745-11e8-9844-e8ee0e183d14.png" alt="image"></p> <p>Klassifizierung der Helligkeit:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48420297-5d1c2a80-e75a-11e8-91ad-cb8a1096b751.png" alt="image"></p> <p>Eigentlicher Flow:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48480191-e3437a00-e809-11e8-8a3d-86cca7713c58.png" alt="image"></p> <h2 id="vorwort"><a href="#vorwort" aria-hidden="true" class="header-anchor">#</a> Vorwort</h2> <p>Die hier vorgestellte Lösung ist erstmal nur dazu gedacht das Funktionsprinzip zu erläutern und einen Startpunkt zu erhalten. Daher kann es für den Einzelfall vielleicht &quot;übertrieben&quot; sein die Steuerung sowohl über Zeit als auch Helligkeit zu gestalten. Im in der Praxis muss das damit den gewünschten örtlichen Gegebenheiten angepasst werden.</p> <p>Beispiel:</p> <ul><li>andere Zeitpunkte, andere Helligkeiten</li> <li>nur Zeit basiert ohne Einbeziehung der Helligkeit</li></ul> <p>Weiterhin ließe sich das Problem sicherlich auf den ersten Blick einfacher mit einem Function Node und etwas JavaScript lösen. Die Empfehlung von IBM (der Firma hinter Node-Red) ist es möglichst auf die Function Nodes zu verzichten.</p> <p>Die Gründe dafür sind:</p> <ul><li>Die Funktion eines Flows erschließt sich viel einfacher mit der Verwendung der Standard Nodes
<ul><li>Auch wenn die Flows damit vielleicht nicht so aufgeräumt wirken, kann man die Funktion später viel einfacher nachvollziehen und ändern.</li></ul></li> <li>Die <em>Function Nodes</em> haben gegenüber den Standard Nodes eine schlechtere Performance, da der Javascript Code in einer Sandbox ausgeführt wird.</li></ul> <h2 id="vorbereitung"><a href="#vorbereitung" aria-hidden="true" class="header-anchor">#</a> Vorbereitung</h2> <p>als Vorbereitung installiert man sich das zusätzliche die Pakete:</p> <ul><li><a href="https://flows.nodered.org/node/node-red-contrib-sun-position" target="_blank" rel="noopener noreferrer">node-red-contrib-sun-position<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://flows.nodered.org/node/node-red-node-smooth" target="_blank" rel="noopener noreferrer">node-red-node-smooth<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li></ul> <p>Die Installation erfolgt wie im im wiki auch unter <a href="https://github.com/hobbyquaker/RedMatic/wiki/Node-Installation" target="_blank" rel="noopener noreferrer">Node-Installation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> erklärt ist.</p> <p><strong>1.</strong></p> <p><img src="https://user-images.githubusercontent.com/12692680/48411467-e2dfac00-e741-11e8-946f-b1ba41162746.png" alt="image"></p> <p><strong>2.</strong></p> <p><img src="https://user-images.githubusercontent.com/12692680/48411498-f68b1280-e741-11e8-8378-dee025c590bd.png" alt="image"></p> <p><strong>3.</strong></p> <p><img src="https://user-images.githubusercontent.com/12692680/48411538-14f10e00-e742-11e8-9809-adb46df1247f.png" alt="image"></p> <p><strong>4.</strong></p> <p><img src="https://user-images.githubusercontent.com/12692680/48411571-2d612880-e742-11e8-92b2-01065c2fee87.png" alt="image"></p> <p><strong>5.</strong></p> <p><img src="https://user-images.githubusercontent.com/12692680/48411607-4c5fba80-e742-11e8-8f29-07af8708aeb4.png" alt="image"></p> <p><strong>6.</strong></p> <p>warten bis fertig</p> <p><img src="https://user-images.githubusercontent.com/12692680/48411664-79ac6880-e742-11e8-9f83-9f74eca08148.png" alt="image"></p> <p><strong>6.</strong></p> <p>neue nodes verwenden</p> <h2 id="redmatic-flow"><a href="#redmatic-flow" aria-hidden="true" class="header-anchor">#</a> RedMatic Flow</h2> <h3 id="start"><a href="#start" aria-hidden="true" class="header-anchor">#</a> Start</h3> <p>Als erstes sollte man sich die <a href="Node-RED">Node-RED Grundlagen</a> durchlesen. Danach kann es auch schon losgehen.</p> <p>In diesem Beispiel haben wir 3 Flows mit unterschiedlichen Triggern:</p> <ul><li>Klassifizierung der Tageszeit</li> <li>Klassifizierung der Helligkeit</li> <li>Flow zum Schalten</li></ul> <p>Im folgenden wird die Funktionsweise der 3 Flows erläutert.</p> <h3 id="klassifizierung-der-tageszeit"><a href="#klassifizierung-der-tageszeit" aria-hidden="true" class="header-anchor">#</a> Klassifizierung der Tageszeit</h3> <p><img src="https://user-images.githubusercontent.com/12692680/48412589-66e76300-e745-11e8-9844-e8ee0e183d14.png" alt="image"></p> <h4 id="flow-zum-import"><a href="#flow-zum-import" aria-hidden="true" class="header-anchor">#</a> Flow zum Import:</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>[{&quot;id&quot;:&quot;8de8648b.932458&quot;,&quot;type&quot;:&quot;time-inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;positionConfig&quot;:&quot;d9e9ca6a.952218&quot;,&quot;payload&quot;:&quot;Sonnenaufgang&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;topic&quot;:&quot;&quot;,&quot;time&quot;:&quot;sunrise&quot;,&quot;timeType&quot;:&quot;pdsTime&quot;,&quot;timeDays&quot;:&quot;*&quot;,&quot;offset&quot;:&quot;-30&quot;,&quot;offsetMultiplier&quot;:60,&quot;property&quot;:&quot;&quot;,&quot;propertyType&quot;:&quot;none&quot;,&quot;timeAlt&quot;:&quot;&quot;,&quot;timeAltType&quot;:&quot;entered&quot;,&quot;timeAltOffset&quot;:0,&quot;timeAltOffsetMultiplier&quot;:60,&quot;x&quot;:1130,&quot;y&quot;:260,&quot;wires&quot;:[[&quot;9d6b34b2.e2ea38&quot;]]},{&quot;id&quot;:&quot;9d6b34b2.e2ea38&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;Persist as global.dayPeriod&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;dayPeriod&quot;,&quot;pt&quot;:&quot;global&quot;,&quot;to&quot;:&quot;payload&quot;,&quot;tot&quot;:&quot;msg&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1540,&quot;y&quot;:340,&quot;wires&quot;:[[&quot;572fa036.14429&quot;]]},{&quot;id&quot;:&quot;deb7e8e2.865da8&quot;,&quot;type&quot;:&quot;time-inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;positionConfig&quot;:&quot;d9e9ca6a.952218&quot;,&quot;payload&quot;:&quot;Tag&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;topic&quot;:&quot;&quot;,&quot;time&quot;:&quot;sunriseEnd&quot;,&quot;timeType&quot;:&quot;pdsTime&quot;,&quot;timeDays&quot;:&quot;*&quot;,&quot;offset&quot;:0,&quot;offsetMultiplier&quot;:60,&quot;property&quot;:&quot;&quot;,&quot;propertyType&quot;:&quot;none&quot;,&quot;timeAlt&quot;:&quot;&quot;,&quot;timeAltType&quot;:&quot;entered&quot;,&quot;timeAltOffset&quot;:0,&quot;timeAltOffsetMultiplier&quot;:60,&quot;x&quot;:1100,&quot;y&quot;:320,&quot;wires&quot;:[[&quot;9d6b34b2.e2ea38&quot;]]},{&quot;id&quot;:&quot;5a609b8c.6ce964&quot;,&quot;type&quot;:&quot;time-inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;positionConfig&quot;:&quot;d9e9ca6a.952218&quot;,&quot;payload&quot;:&quot;Sonnenuntergang&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;topic&quot;:&quot;&quot;,&quot;time&quot;:&quot;sunset&quot;,&quot;timeType&quot;:&quot;pdsTime&quot;,&quot;timeDays&quot;:&quot;*&quot;,&quot;offset&quot;:0,&quot;offsetMultiplier&quot;:60,&quot;property&quot;:&quot;&quot;,&quot;propertyType&quot;:&quot;none&quot;,&quot;timeAlt&quot;:&quot;&quot;,&quot;timeAltType&quot;:&quot;entered&quot;,&quot;timeAltOffset&quot;:0,&quot;timeAltOffsetMultiplier&quot;:60,&quot;x&quot;:1130,&quot;y&quot;:380,&quot;wires&quot;:[[&quot;9d6b34b2.e2ea38&quot;]]},{&quot;id&quot;:&quot;54fdf606.03dd98&quot;,&quot;type&quot;:&quot;time-inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;positionConfig&quot;:&quot;d9e9ca6a.952218&quot;,&quot;payload&quot;:&quot;Morgendämmerung&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;topic&quot;:&quot;&quot;,&quot;time&quot;:&quot;dawn&quot;,&quot;timeType&quot;:&quot;pdsTime&quot;,&quot;timeDays&quot;:&quot;*&quot;,&quot;offset&quot;:0,&quot;offsetMultiplier&quot;:60,&quot;property&quot;:&quot;&quot;,&quot;propertyType&quot;:&quot;none&quot;,&quot;timeAlt&quot;:&quot;&quot;,&quot;timeAltType&quot;:&quot;entered&quot;,&quot;timeAltOffset&quot;:0,&quot;timeAltOffsetMultiplier&quot;:60,&quot;x&quot;:1140,&quot;y&quot;:200,&quot;wires&quot;:[[&quot;9d6b34b2.e2ea38&quot;]]},{&quot;id&quot;:&quot;79030ca5.4518b4&quot;,&quot;type&quot;:&quot;time-inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;positionConfig&quot;:&quot;d9e9ca6a.952218&quot;,&quot;payload&quot;:&quot;Abenddämmerung&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;topic&quot;:&quot;&quot;,&quot;time&quot;:&quot;dusk&quot;,&quot;timeType&quot;:&quot;pdsTime&quot;,&quot;timeDays&quot;:&quot;*&quot;,&quot;offset&quot;:0,&quot;offsetMultiplier&quot;:60,&quot;property&quot;:&quot;&quot;,&quot;propertyType&quot;:&quot;none&quot;,&quot;timeAlt&quot;:&quot;&quot;,&quot;timeAltType&quot;:&quot;entered&quot;,&quot;timeAltOffset&quot;:0,&quot;timeAltOffsetMultiplier&quot;:60,&quot;x&quot;:1130,&quot;y&quot;:440,&quot;wires&quot;:[[&quot;9d6b34b2.e2ea38&quot;]]},{&quot;id&quot;:&quot;ac053b69.3061d8&quot;,&quot;type&quot;:&quot;time-inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;positionConfig&quot;:&quot;d9e9ca6a.952218&quot;,&quot;payload&quot;:&quot;Nacht&quot;,&quot;payloadType&quot;:&quot;str&quot;,&quot;topic&quot;:&quot;&quot;,&quot;time&quot;:&quot;nauticalDusk&quot;,&quot;timeType&quot;:&quot;pdsTime&quot;,&quot;timeDays&quot;:&quot;*&quot;,&quot;offset&quot;:0,&quot;offsetMultiplier&quot;:60,&quot;property&quot;:&quot;&quot;,&quot;propertyType&quot;:&quot;none&quot;,&quot;timeAlt&quot;:&quot;&quot;,&quot;timeAltType&quot;:&quot;entered&quot;,&quot;timeAltOffset&quot;:0,&quot;timeAltOffsetMultiplier&quot;:60,&quot;x&quot;:1120,&quot;y&quot;:500,&quot;wires&quot;:[[&quot;9d6b34b2.e2ea38&quot;]]},{&quot;id&quot;:&quot;572fa036.14429&quot;,&quot;type&quot;:&quot;link out&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;chg-dayPeriod&quot;,&quot;links&quot;:[],&quot;x&quot;:1755,&quot;y&quot;:340,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;d9e9ca6a.952218&quot;,&quot;type&quot;:&quot;position-config&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;Entenhausen&quot;,&quot;longitude&quot;:&quot;13.72324&quot;,&quot;latitude&quot;:&quot;51.12381&quot;,&quot;angleType&quot;:&quot;deg&quot;}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="erlauterung-des-flows"><a href="#erlauterung-des-flows" aria-hidden="true" class="header-anchor">#</a> Erläuterung des Flows</h4> <h5 id="time-inject-nodes"><a href="#time-inject-nodes" aria-hidden="true" class="header-anchor">#</a> time-inject Nodes</h5> <p>Der Flow wird durch die spezielle Inject Nodes getriggert. Diese starten jewels zum angegebenen Zeitpunkt den Flow gleich mit entsprechendem Payload.</p> <p>Einstellungen der time-inject nodes:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48479542-ef2e3c80-e807-11e8-882d-2c1d71b429b5.png" alt="image"></p> <p>Bei der Position kann einmalig die GPS Koordinaten zu hinterlegen und das gewünschte Format für die Winkelangaben:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48474045-06662d80-e7fa-11e8-875b-881db9b7482b.png" alt="image"></p> <p>Unter Payload stellt man den Payload der Nachricht ein, die gesendet werden soll. In diesem Falle ist das der name der Tageszeit.</p> <p><img src="https://user-images.githubusercontent.com/12692680/48479628-2a307000-e808-11e8-8dfd-7840a4bd7996.png" alt="image"></p> <p>Als Zeit wählt man den gewünschten Start-Zeitpunkt der Tageszeit. Hier kann man mit einem positiven oder negativen Offset arbeiten. Über die Wahl der Tage kann man einstellen für welche Tage die Zeit gilt. Damit ist es möglich getrennte Trigger mit unterschiedlichen Zeiten für Wochenende/Wochentage anzulegen.</p> <p><img src="https://user-images.githubusercontent.com/12692680/48479641-35839b80-e808-11e8-9bf1-bbfce3bf3d31.png" alt="image"></p> <p>Die zusätzlichen Einstellungen (falls vorhanden) lässt man erstmal wie diese sind.</p> <h5 id="change-node"><a href="#change-node" aria-hidden="true" class="header-anchor">#</a> Change Node</h5> <p>Der Change Node dient zum persistenten abspeichern des aktuellen Tageszeit. Dazu wird der in der Nachricht enthaltene payload auf einen globalen Parameter abgespeichert.</p> <p><img src="https://user-images.githubusercontent.com/12692680/48479788-9f9c4080-e808-11e8-9f0e-07df482eabe7.png" alt="image"></p> <p>anstelle global (für alle Reiter) kann man Einstellungen der aktuellen Nachricht verändern (msg.) oder nur lokal für den aktuellen Reiter (flow.)</p> <p><img src="https://user-images.githubusercontent.com/12692680/48479825-b80c5b00-e808-11e8-916f-ba476049b9ab.png" alt="image"></p> <h3 id="klassifizierung-der-helligkeit"><a href="#klassifizierung-der-helligkeit" aria-hidden="true" class="header-anchor">#</a> Klassifizierung der Helligkeit</h3> <p><img src="https://user-images.githubusercontent.com/12692680/48420297-5d1c2a80-e75a-11e8-91ad-cb8a1096b751.png" alt="image"></p> <h4 id="flow-zum-import-2"><a href="#flow-zum-import-2" aria-hidden="true" class="header-anchor">#</a> Flow zum Import:</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>[{&quot;id&quot;:&quot;e15b0c08.ecb44&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;Sonnenintensität&quot;,&quot;active&quot;:true,&quot;tosidebar&quot;:false,&quot;console&quot;:false,&quot;tostatus&quot;:true,&quot;complete&quot;:&quot;payload&quot;,&quot;x&quot;:2930,&quot;y&quot;:260,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;ab495667.c3d4e8&quot;,&quot;type&quot;:&quot;link out&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;chg-sunIntensity&quot;,&quot;links&quot;:[],&quot;x&quot;:2735,&quot;y&quot;:320,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;dcb5bc25.8fc86&quot;,&quot;type&quot;:&quot;comment&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;chg-SunIntensity.type&quot;,&quot;info&quot;:&quot;&quot;,&quot;x&quot;:2940,&quot;y&quot;:320,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;3ea055c8.b7510a&quot;,&quot;type&quot;:&quot;ccu-value&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;Lichtsensor&quot;,&quot;iface&quot;:&quot;&quot;,&quot;channel&quot;:&quot;JPLIO00001:1 K30_810_Lichtsensor&quot;,&quot;datapoint&quot;:&quot;LUX&quot;,&quot;mode&quot;:&quot;&quot;,&quot;start&quot;:true,&quot;change&quot;:true,&quot;cache&quot;:true,&quot;on&quot;:0,&quot;onType&quot;:&quot;undefined&quot;,&quot;ramp&quot;:0,&quot;rampType&quot;:&quot;undefined&quot;,&quot;working&quot;:false,&quot;ccuConfig&quot;:&quot;78742432.c6d88c&quot;,&quot;topic&quot;:&quot;ccu/system/info/sun/intensity/lightN&quot;,&quot;x&quot;:2030,&quot;y&quot;:200,&quot;wires&quot;:[[&quot;5b3d4e4c.203d8&quot;]]},{&quot;id&quot;:&quot;dbc9afc7.f819&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;#:(memory)::sunIntensity&quot;,&quot;pt&quot;:&quot;global&quot;,&quot;to&quot;:&quot;payload&quot;,&quot;tot&quot;:&quot;msg&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2680,&quot;y&quot;:260,&quot;wires&quot;:[[&quot;e15b0c08.ecb44&quot;,&quot;e53c6626.f79618&quot;]]},{&quot;id&quot;:&quot;5069726a.50143c&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;lte&quot;,&quot;v&quot;:&quot;0&quot;,&quot;vt&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;lte&quot;,&quot;v&quot;:&quot;160&quot;,&quot;vt&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;lte&quot;,&quot;v&quot;:&quot;650&quot;,&quot;vt&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;lte&quot;,&quot;v&quot;:&quot;3500&quot;,&quot;vt&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;lte&quot;,&quot;v&quot;:&quot;10500&quot;,&quot;vt&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;false&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:6,&quot;x&quot;:2190,&quot;y&quot;:260,&quot;wires&quot;:[[&quot;c131def3.5d9f8&quot;],[&quot;76083db9.4514b4&quot;],[&quot;c37ef4b9.b759b8&quot;],[&quot;c45402d4.a8484&quot;],[&quot;86fb0a74.233978&quot;],[&quot;55d021b5.21566&quot;]]},{&quot;id&quot;:&quot;c131def3.5d9f8&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;tiefschwarz&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;tiefschwarz&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2390,&quot;y&quot;:160,&quot;wires&quot;:[[&quot;dbc9afc7.f819&quot;]]},{&quot;id&quot;:&quot;76083db9.4514b4&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;finster&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;finster&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2370,&quot;y&quot;:200,&quot;wires&quot;:[[&quot;dbc9afc7.f819&quot;]]},{&quot;id&quot;:&quot;c37ef4b9.b759b8&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;stockdunkel&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;stockdunkel&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2390,&quot;y&quot;:240,&quot;wires&quot;:[[&quot;dbc9afc7.f819&quot;]]},{&quot;id&quot;:&quot;c45402d4.a8484&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;dunkel&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;dunkel&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2370,&quot;y&quot;:280,&quot;wires&quot;:[[&quot;dbc9afc7.f819&quot;]]},{&quot;id&quot;:&quot;86fb0a74.233978&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;halbdunkel&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;halbdunkel&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2390,&quot;y&quot;:320,&quot;wires&quot;:[[&quot;dbc9afc7.f819&quot;]]},{&quot;id&quot;:&quot;55d021b5.21566&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;hell&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;hell&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2370,&quot;y&quot;:360,&quot;wires&quot;:[[&quot;dbc9afc7.f819&quot;]]},{&quot;id&quot;:&quot;e53c6626.f79618&quot;,&quot;type&quot;:&quot;rbe&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;func&quot;:&quot;rbe&quot;,&quot;gap&quot;:&quot;&quot;,&quot;start&quot;:&quot;&quot;,&quot;inout&quot;:&quot;out&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;x&quot;:2630,&quot;y&quot;:320,&quot;wires&quot;:[[&quot;ab495667.c3d4e8&quot;]]},{&quot;id&quot;:&quot;5b3d4e4c.203d8&quot;,&quot;type&quot;:&quot;smooth&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;action&quot;:&quot;max&quot;,&quot;count&quot;:&quot;6&quot;,&quot;round&quot;:&quot;&quot;,&quot;mult&quot;:&quot;multi&quot;,&quot;x&quot;:2020,&quot;y&quot;:260,&quot;wires&quot;:[[&quot;5069726a.50143c&quot;]]},{&quot;id&quot;:&quot;78742432.c6d88c&quot;,&quot;type&quot;:&quot;ccu-connection&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;Homematic-Dummy&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;regaEnabled&quot;:false,&quot;bcrfEnabled&quot;:true,&quot;iprfEnabled&quot;:false,&quot;virtEnabled&quot;:false,&quot;bcwiEnabled&quot;:false,&quot;cuxdEnabled&quot;:false,&quot;regaPoll&quot;:false,&quot;regaInterval&quot;:&quot;120&quot;,&quot;rpcPingTimeout&quot;:&quot;60&quot;,&quot;rpcInitAddress&quot;:&quot;127.0.0.51&quot;,&quot;rpcServerHost&quot;:&quot;172.20.51.58&quot;,&quot;rpcBinPort&quot;:&quot;2047&quot;,&quot;rpcXmlPort&quot;:&quot;2048&quot;,&quot;contextStore&quot;:&quot;memory&quot;}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="erlauterung-des-flows-2"><a href="#erlauterung-des-flows-2" aria-hidden="true" class="header-anchor">#</a> Erläuterung des Flows</h4> <p>Für die Bestimmung der Helligkeit wird der der Messwert des Lichtsensors verwendet und ebenfalls in eine Klassifizierung übernommen.</p> <p>Um zu verhindern das sich das Ergebnis bei kurzfristiger Änderung der Helligkeit verändert (Wolke vor der Sonne) wurde die Smooth Node zur Glättung der Ergebnisse vorgeschaltet. In die Beispiel wird der maximalwert der letzten 6 Messwerte ausgegeben:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48480567-32d67580-e80b-11e8-94f4-6e211f180cbb.png" alt="image"></p> <p>Die switch node dient dazu den Flow anhand verschiedener Messwerte zu &quot;verzweigen&quot;. Es ist zu beachten, das im unteren bereich der EInstellungen das Verhalten der switch node auf &quot;stopping after first match&quot; umgestellt wird. Damit wird sichergestellt das eine Nachricht nur an <strong>einen</strong> Ausgang gesendet wird. Ist dies auf <strong>checking all rules</strong> gesetzt wird die nachricht an alle ausgänge für welche die bedingung zutrifft gesendet. Im Beispiel der Einstellung &quot;otherwise&quot; immer an den entsprechenden Ausgang.</p> <p>Der Link am Ende wird erstmal nicht genutzt. Dieser dient dazu andere Flows bei Änderung der Tageszeit zu &quot;triggern&quot;. Damit kann man beispielsweise Rollläden automatisch steuern.</p> <p><img src="https://user-images.githubusercontent.com/12692680/48480710-95c80c80-e80b-11e8-8545-9aca4e36da33.png" alt="image"></p> <p>über die change Nodes wird einfach der Wert des payload verändert und im nachgelagerten change node auf eine globale Variable gespeichert.</p> <p><img src="https://user-images.githubusercontent.com/12692680/48480874-066f2900-e80c-11e8-82c5-9a089733cedb.png" alt="image"></p> <p>Das ließe sich vereinfachen indem man gleich den Wert auf die globalen Variable (context) speichert. Die Implementierung hier ist so gewählt worden um ebenfalls mit einem nachgelagerten link node bei Änderung des Helligkeitsverlaufes andere Flows triggern zu können. Der rbe Node dient dazu die Nachricht nur bei einer wirklichen Änderung weiterzuleiten.</p> <h3 id="flow-zum-schalten"><a href="#flow-zum-schalten" aria-hidden="true" class="header-anchor">#</a> Flow zum Schalten</h3> <p><img src="https://user-images.githubusercontent.com/12692680/48480191-e3437a00-e809-11e8-8a3d-86cca7713c58.png" alt="image"></p> <h4 id="flow-zum-import-3"><a href="#flow-zum-import-3" aria-hidden="true" class="header-anchor">#</a> Flow zum Import:</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>[{&quot;id&quot;:&quot;a2c8adce.7a01e&quot;,&quot;type&quot;:&quot;ccu-value&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;Bewegungsmelder&quot;,&quot;iface&quot;:&quot;&quot;,&quot;channel&quot;:&quot;JPLIO00006:1&quot;,&quot;datapoint&quot;:&quot;MOTION&quot;,&quot;mode&quot;:&quot;&quot;,&quot;start&quot;:true,&quot;change&quot;:true,&quot;cache&quot;:false,&quot;on&quot;:0,&quot;onType&quot;:&quot;undefined&quot;,&quot;ramp&quot;:0,&quot;rampType&quot;:&quot;undefined&quot;,&quot;working&quot;:false,&quot;ccuConfig&quot;:&quot;78742432.c6d88c&quot;,&quot;topic&quot;:&quot;${CCU}/${Interface}/${channel}/${datapoint}&quot;,&quot;x&quot;:1130,&quot;y&quot;:660,&quot;wires&quot;:[[&quot;3594cf09.7eba7&quot;]]},{&quot;id&quot;:&quot;3594cf09.7eba7&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;TREPPE_AUTOMATIK&quot;,&quot;property&quot;:&quot;TREPPE_AUTOMATIK&quot;,&quot;propertyType&quot;:&quot;flow&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;true&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;false&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:1390,&quot;y&quot;:660,&quot;wires&quot;:[[&quot;573d29ad.2b90a8&quot;],[]]},{&quot;id&quot;:&quot;cd1161c6.a62e3&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;true&quot;,&quot;payloadType&quot;:&quot;bool&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;onceDelay&quot;:0.1,&quot;x&quot;:1090,&quot;y&quot;:760,&quot;wires&quot;:[[&quot;c98e0564.0cef88&quot;]]},{&quot;id&quot;:&quot;dd77f2a8.b8904&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;true&quot;,&quot;payloadType&quot;:&quot;bool&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;onceDelay&quot;:0.1,&quot;x&quot;:1090,&quot;y&quot;:880,&quot;wires&quot;:[[&quot;6ee57f47.8a331&quot;]]},{&quot;id&quot;:&quot;35cbc477.9cfc8c&quot;,&quot;type&quot;:&quot;ccu-value&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;Taster1&quot;,&quot;iface&quot;:&quot;&quot;,&quot;channel&quot;:&quot;JPLIO00006:1&quot;,&quot;datapoint&quot;:&quot;PRESS_SHORT&quot;,&quot;mode&quot;:&quot;&quot;,&quot;start&quot;:true,&quot;change&quot;:true,&quot;cache&quot;:false,&quot;on&quot;:0,&quot;onType&quot;:&quot;undefined&quot;,&quot;ramp&quot;:0,&quot;rampType&quot;:&quot;undefined&quot;,&quot;working&quot;:false,&quot;ccuConfig&quot;:&quot;78742432.c6d88c&quot;,&quot;topic&quot;:&quot;${CCU}/${Interface}/${channel}/${datapoint}&quot;,&quot;x&quot;:1100,&quot;y&quot;:800,&quot;wires&quot;:[[&quot;c98e0564.0cef88&quot;]]},{&quot;id&quot;:&quot;4511c81f.547d78&quot;,&quot;type&quot;:&quot;ccu-value&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;Taster2&quot;,&quot;iface&quot;:&quot;&quot;,&quot;channel&quot;:&quot;JPLIO00009:1&quot;,&quot;datapoint&quot;:&quot;PRESS_SHORT&quot;,&quot;mode&quot;:&quot;&quot;,&quot;start&quot;:true,&quot;change&quot;:true,&quot;cache&quot;:false,&quot;on&quot;:0,&quot;onType&quot;:&quot;undefined&quot;,&quot;ramp&quot;:0,&quot;rampType&quot;:&quot;undefined&quot;,&quot;working&quot;:false,&quot;ccuConfig&quot;:&quot;78742432.c6d88c&quot;,&quot;topic&quot;:&quot;${CCU}/${Interface}/${channel}/${datapoint}&quot;,&quot;x&quot;:1100,&quot;y&quot;:920,&quot;wires&quot;:[[&quot;6ee57f47.8a331&quot;]]},{&quot;id&quot;:&quot;c98e0564.0cef88&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;flow.TREPPE_AUTOMATIK = true&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;TREPPE_AUTOMATIK&quot;,&quot;pt&quot;:&quot;flow&quot;,&quot;to&quot;:&quot;true&quot;,&quot;tot&quot;:&quot;bool&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1400,&quot;y&quot;:760,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;6ee57f47.8a331&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;flow.TREPPE_AUTOMATIK = false&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;TREPPE_AUTOMATIK&quot;,&quot;pt&quot;:&quot;flow&quot;,&quot;to&quot;:&quot;true&quot;,&quot;tot&quot;:&quot;bool&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1400,&quot;y&quot;:900,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;573d29ad.2b90a8&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;is true&quot;,&quot;property&quot;:&quot;payload&quot;,&quot;propertyType&quot;:&quot;msg&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;true&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;true&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:2,&quot;x&quot;:1610,&quot;y&quot;:660,&quot;wires&quot;:[[&quot;b5c5e3f5.eb27d&quot;],[&quot;7b8d7767.c1f078&quot;]]},{&quot;id&quot;:&quot;b5c5e3f5.eb27d&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;dayPeriod&quot;,&quot;property&quot;:&quot;dayPeriod&quot;,&quot;propertyType&quot;:&quot;global&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;Morgendämmerung&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;Sonnenaufgang&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;Tag&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;Sonnenuntergang&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;Abenddämmerung&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;false&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:6,&quot;x&quot;:1780,&quot;y&quot;:580,&quot;wires&quot;:[[&quot;1e31fc2e.515da4&quot;],[&quot;1e31fc2e.515da4&quot;],[&quot;d6334be4.f24768&quot;],[&quot;1e31fc2e.515da4&quot;],[&quot;1e31fc2e.515da4&quot;],[&quot;5154cd32.e0a874&quot;]]},{&quot;id&quot;:&quot;d6334be4.f24768&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;100%&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;1&quot;,&quot;tot&quot;:&quot;num&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2150,&quot;y&quot;:600,&quot;wires&quot;:[[&quot;6b1dd258.71ebbc&quot;]]},{&quot;id&quot;:&quot;1e31fc2e.515da4&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;75%&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;0.75&quot;,&quot;tot&quot;:&quot;num&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2150,&quot;y&quot;:640,&quot;wires&quot;:[[&quot;6b1dd258.71ebbc&quot;]]},{&quot;id&quot;:&quot;b4465a88.e29268&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;50%&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;0.5&quot;,&quot;tot&quot;:&quot;num&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:2150,&quot;y&quot;:680,&quot;wires&quot;:[[&quot;6b1dd258.71ebbc&quot;]]},{&quot;id&quot;:&quot;6b1dd258.71ebbc&quot;,&quot;type&quot;:&quot;ccu-value&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;Lampe Treppe&quot;,&quot;iface&quot;:&quot;&quot;,&quot;channel&quot;:&quot;JPLIO00005:1&quot;,&quot;datapoint&quot;:&quot;STATE&quot;,&quot;mode&quot;:&quot;&quot;,&quot;start&quot;:true,&quot;change&quot;:true,&quot;cache&quot;:false,&quot;on&quot;:0,&quot;onType&quot;:&quot;undefined&quot;,&quot;ramp&quot;:0,&quot;rampType&quot;:&quot;undefined&quot;,&quot;working&quot;:false,&quot;ccuConfig&quot;:&quot;78742432.c6d88c&quot;,&quot;topic&quot;:&quot;${CCU}/${Interface}/${channel}/${datapoint}&quot;,&quot;x&quot;:2380,&quot;y&quot;:720,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;7b8d7767.c1f078&quot;,&quot;type&quot;:&quot;delay&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;&quot;,&quot;pauseType&quot;:&quot;delay&quot;,&quot;timeout&quot;:&quot;10&quot;,&quot;timeoutUnits&quot;:&quot;minutes&quot;,&quot;rate&quot;:&quot;1&quot;,&quot;nbRateUnits&quot;:&quot;1&quot;,&quot;rateUnits&quot;:&quot;second&quot;,&quot;randomFirst&quot;:&quot;1&quot;,&quot;randomLast&quot;:&quot;5&quot;,&quot;randomUnits&quot;:&quot;seconds&quot;,&quot;drop&quot;:false,&quot;x&quot;:1790,&quot;y&quot;:820,&quot;wires&quot;:[[&quot;228171e5.567e0e&quot;]]},{&quot;id&quot;:&quot;228171e5.567e0e&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;aus&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;0&quot;,&quot;tot&quot;:&quot;num&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:1970,&quot;y&quot;:820,&quot;wires&quot;:[[&quot;6b1dd258.71ebbc&quot;]]},{&quot;id&quot;:&quot;5154cd32.e0a874&quot;,&quot;type&quot;:&quot;switch&quot;,&quot;z&quot;:&quot;d7bd7fb6.a0c13&quot;,&quot;name&quot;:&quot;sunIntensity&quot;,&quot;property&quot;:&quot;sunIntensity&quot;,&quot;propertyType&quot;:&quot;global&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;tiefschwarz&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;finster&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;stockdunkel&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;dunkel&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;eq&quot;,&quot;v&quot;:&quot;halbdunkel&quot;,&quot;vt&quot;:&quot;str&quot;},{&quot;t&quot;:&quot;else&quot;}],&quot;checkall&quot;:&quot;false&quot;,&quot;repair&quot;:false,&quot;outputs&quot;:6,&quot;x&quot;:1950,&quot;y&quot;:700,&quot;wires&quot;:[[&quot;d6334be4.f24768&quot;],[&quot;d6334be4.f24768&quot;],[&quot;1e31fc2e.515da4&quot;],[&quot;b4465a88.e29268&quot;],[&quot;b4465a88.e29268&quot;],[]]},{&quot;id&quot;:&quot;78742432.c6d88c&quot;,&quot;type&quot;:&quot;ccu-connection&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;Homematic-Dummy&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;regaEnabled&quot;:false,&quot;bcrfEnabled&quot;:true,&quot;iprfEnabled&quot;:false,&quot;virtEnabled&quot;:false,&quot;bcwiEnabled&quot;:false,&quot;cuxdEnabled&quot;:false,&quot;regaPoll&quot;:false,&quot;regaInterval&quot;:&quot;120&quot;,&quot;rpcPingTimeout&quot;:&quot;60&quot;,&quot;rpcInitAddress&quot;:&quot;127.0.0.51&quot;,&quot;rpcServerHost&quot;:&quot;172.20.51.58&quot;,&quot;rpcBinPort&quot;:&quot;2047&quot;,&quot;rpcXmlPort&quot;:&quot;2048&quot;,&quot;contextStore&quot;:&quot;memory&quot;}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="erlauterung-des-flows-3"><a href="#erlauterung-des-flows-3" aria-hidden="true" class="header-anchor">#</a> Erläuterung des Flows</h4> <p>die beiden kleineren Flows zum setzen des Automaic Modus sind recht einfach aufgebaut:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48487888-c6b23c80-e81f-11e8-84ea-486e234363cf.png" alt="image"></p> <p>Diese setzen eine lokale flow variable (für den aktuellen Reiter gültig) auf den Wert true oder false:</p> <p><img src="https://user-images.githubusercontent.com/12692680/48487835-aa160480-e81f-11e8-86a1-901702f43e19.png" alt="image"></p> <p>Davon abhängig wird im eigentlichen Flow zum Schalten der Lampe über den switch Node abgefragt welchen Wert diese variable besitzt.</p> <h4 id="konfiguration-des-trigger"><a href="#konfiguration-des-trigger" aria-hidden="true" class="header-anchor">#</a> Konfiguration des Trigger</h4> <h3 id="ablauf-steuern"><a href="#ablauf-steuern" aria-hidden="true" class="header-anchor">#</a> Ablauf steuern</h3> <h3 id="ablauf-verandern"><a href="#ablauf-verandern" aria-hidden="true" class="header-anchor">#</a> Ablauf verändern</h3> <h3 id="aktion-ausfuhren"><a href="#aktion-ausfuhren" aria-hidden="true" class="header-anchor">#</a> Aktion ausführen</h3> <h3 id="abschluss"><a href="#abschluss" aria-hidden="true" class="header-anchor">#</a> Abschluss</h3> <p>Ist dies erledigt, wird diese Änderung aktiviert mittels des Deploy Buttons:<br> <img src="https://user-images.githubusercontent.com/12692680/44590937-962caa80-a7bc-11e8-9df3-592da55d8098.png" alt="image"></p> <h3 id="flows-als-download"><a href="#flows-als-download" aria-hidden="true" class="header-anchor">#</a> Flows als Download</h3></div> <!----> <!----> </div></div><div class="global-ui"></div></div>
    <script src="/assets/js/2.c7572858.js" defer></script><script src="/assets/js/5.057cfdf0.js" defer></script><script src="/assets/js/68.21130725.js" defer></script><script src="/assets/js/app.6e49cc76.js" defer></script>
  </body>
</html>
