<!DOCTYPE html>
<html lang="de-DE">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RedMatic HomeKit | RedMatic</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.71957ad0.css" as="style"><link rel="preload" href="/assets/js/app.6e49cc76.js" as="script"><link rel="preload" href="/assets/js/2.c7572858.js" as="script"><link rel="preload" href="/assets/js/5.057cfdf0.js" as="script"><link rel="preload" href="/assets/js/74.8c03db03.js" as="script"><link rel="prefetch" href="/assets/js/10.370891fb.js"><link rel="prefetch" href="/assets/js/100.ebba27a8.js"><link rel="prefetch" href="/assets/js/101.26a83898.js"><link rel="prefetch" href="/assets/js/102.42d8b92e.js"><link rel="prefetch" href="/assets/js/103.acff4d0e.js"><link rel="prefetch" href="/assets/js/104.723e76ca.js"><link rel="prefetch" href="/assets/js/105.6800050d.js"><link rel="prefetch" href="/assets/js/106.dbedac07.js"><link rel="prefetch" href="/assets/js/107.433fb62b.js"><link rel="prefetch" href="/assets/js/108.086301df.js"><link rel="prefetch" href="/assets/js/109.cda762a8.js"><link rel="prefetch" href="/assets/js/11.15b86789.js"><link rel="prefetch" href="/assets/js/110.041c02ba.js"><link rel="prefetch" href="/assets/js/111.37b9fa07.js"><link rel="prefetch" href="/assets/js/12.0617ac04.js"><link rel="prefetch" href="/assets/js/13.457dffc3.js"><link rel="prefetch" href="/assets/js/14.b86c5f57.js"><link rel="prefetch" href="/assets/js/15.aa479949.js"><link rel="prefetch" href="/assets/js/16.862e88e9.js"><link rel="prefetch" href="/assets/js/17.ce310baa.js"><link rel="prefetch" href="/assets/js/18.8d10cbba.js"><link rel="prefetch" href="/assets/js/19.c7b5e7c6.js"><link rel="prefetch" href="/assets/js/20.4e0e1085.js"><link rel="prefetch" href="/assets/js/21.1a8d1e89.js"><link rel="prefetch" href="/assets/js/22.4f484a52.js"><link rel="prefetch" href="/assets/js/23.293e3163.js"><link rel="prefetch" href="/assets/js/24.5dcc5c56.js"><link rel="prefetch" href="/assets/js/25.12eec4f2.js"><link rel="prefetch" href="/assets/js/26.f6f4063c.js"><link rel="prefetch" href="/assets/js/27.a9ec623a.js"><link rel="prefetch" href="/assets/js/28.bacd5a42.js"><link rel="prefetch" href="/assets/js/29.7b465ef0.js"><link rel="prefetch" href="/assets/js/3.fefb63a3.js"><link rel="prefetch" href="/assets/js/30.ba3e19da.js"><link rel="prefetch" href="/assets/js/31.2e29fe01.js"><link rel="prefetch" href="/assets/js/32.c9a889aa.js"><link rel="prefetch" href="/assets/js/33.38b1cadd.js"><link rel="prefetch" href="/assets/js/34.5c14c4ec.js"><link rel="prefetch" href="/assets/js/35.26a3ac36.js"><link rel="prefetch" href="/assets/js/36.05eb203c.js"><link rel="prefetch" href="/assets/js/37.49fc2e1e.js"><link rel="prefetch" href="/assets/js/38.e1154847.js"><link rel="prefetch" href="/assets/js/39.ba4e1eb5.js"><link rel="prefetch" href="/assets/js/4.7dd2b66f.js"><link rel="prefetch" href="/assets/js/40.a6ff0e13.js"><link rel="prefetch" href="/assets/js/41.188ab24f.js"><link rel="prefetch" href="/assets/js/42.cd0cce71.js"><link rel="prefetch" href="/assets/js/43.9b32c780.js"><link rel="prefetch" href="/assets/js/44.6abc643c.js"><link rel="prefetch" href="/assets/js/45.58296594.js"><link rel="prefetch" href="/assets/js/46.bd201890.js"><link rel="prefetch" href="/assets/js/47.1bdfbf89.js"><link rel="prefetch" href="/assets/js/48.f40f39a2.js"><link rel="prefetch" href="/assets/js/49.badc649f.js"><link rel="prefetch" href="/assets/js/50.d19262d0.js"><link rel="prefetch" href="/assets/js/51.fc622255.js"><link rel="prefetch" href="/assets/js/52.6dc73916.js"><link rel="prefetch" href="/assets/js/53.a9252432.js"><link rel="prefetch" href="/assets/js/54.43bc18a2.js"><link rel="prefetch" href="/assets/js/55.72544862.js"><link rel="prefetch" href="/assets/js/56.5c2f9839.js"><link rel="prefetch" href="/assets/js/57.0a17e572.js"><link rel="prefetch" href="/assets/js/58.310da15d.js"><link rel="prefetch" href="/assets/js/59.51aa300a.js"><link rel="prefetch" href="/assets/js/6.0b7c5b87.js"><link rel="prefetch" href="/assets/js/60.e8c78387.js"><link rel="prefetch" href="/assets/js/61.9ceae67a.js"><link rel="prefetch" href="/assets/js/62.ad42bf79.js"><link rel="prefetch" href="/assets/js/63.75704d8a.js"><link rel="prefetch" href="/assets/js/64.365e5d3c.js"><link rel="prefetch" href="/assets/js/65.6187df17.js"><link rel="prefetch" href="/assets/js/66.50e9879f.js"><link rel="prefetch" href="/assets/js/67.bd7d0008.js"><link rel="prefetch" href="/assets/js/68.21130725.js"><link rel="prefetch" href="/assets/js/69.70826e4f.js"><link rel="prefetch" href="/assets/js/7.bbb2fc40.js"><link rel="prefetch" href="/assets/js/70.e821e255.js"><link rel="prefetch" href="/assets/js/71.43c46f7b.js"><link rel="prefetch" href="/assets/js/72.fdd9882c.js"><link rel="prefetch" href="/assets/js/73.b3f9cb62.js"><link rel="prefetch" href="/assets/js/75.865bc233.js"><link rel="prefetch" href="/assets/js/76.4240dba2.js"><link rel="prefetch" href="/assets/js/77.0c62181c.js"><link rel="prefetch" href="/assets/js/78.28d14982.js"><link rel="prefetch" href="/assets/js/79.30e51444.js"><link rel="prefetch" href="/assets/js/8.3453e2ab.js"><link rel="prefetch" href="/assets/js/80.42684a82.js"><link rel="prefetch" href="/assets/js/81.1f1adbaf.js"><link rel="prefetch" href="/assets/js/82.72ae0b05.js"><link rel="prefetch" href="/assets/js/83.837235c9.js"><link rel="prefetch" href="/assets/js/84.b59731e4.js"><link rel="prefetch" href="/assets/js/85.520a5a8b.js"><link rel="prefetch" href="/assets/js/86.35f47343.js"><link rel="prefetch" href="/assets/js/87.02ba76b1.js"><link rel="prefetch" href="/assets/js/88.cba15d62.js"><link rel="prefetch" href="/assets/js/89.0ed0aefa.js"><link rel="prefetch" href="/assets/js/9.2479c717.js"><link rel="prefetch" href="/assets/js/90.b115f6b8.js"><link rel="prefetch" href="/assets/js/91.e1db88dd.js"><link rel="prefetch" href="/assets/js/92.74b2dddb.js"><link rel="prefetch" href="/assets/js/93.50b54ff6.js"><link rel="prefetch" href="/assets/js/94.5566f075.js"><link rel="prefetch" href="/assets/js/95.3a14d155.js"><link rel="prefetch" href="/assets/js/96.4efd34cd.js"><link rel="prefetch" href="/assets/js/97.0f68cf98.js"><link rel="prefetch" href="/assets/js/98.8acd7862.js"><link rel="prefetch" href="/assets/js/99.2ffeeba3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.71957ad0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo-plain.png" alt="RedMatic" class="logo"> <span class="site-name can-hide">RedMatic</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doku/" class="nav-link">Doku</a></div><div class="nav-item"><a href="/nodes/" class="nav-link">Nodes</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">Wiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://homematic-forum.de/forum/viewforum.php?f=77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/groups/Homematic.Freunde" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook Gruppe
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/homematicuser/shared_invite/enQtNDgyNDM2OTkyMDA2LWY1YjY0NTE0NmY0OWM3YWUzMzAzMTgxYmRjMTMyOWE3NjkxNDdlMDY5ZjlhYzM5Nzg2N2U2YjdmNzNlYWNhNTU" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/HM-RedMatic/RedMatic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="theme-toggler" data-v-6649375f><a data-v-6649375f><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon" data-v-6649375f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-6649375f></path></svg></a></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doku/" class="nav-link">Doku</a></div><div class="nav-item"><a href="/nodes/" class="nav-link">Nodes</a></div><div class="nav-item"><a href="/wiki/" class="nav-link router-link-active">Wiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://homematic-forum.de/forum/viewforum.php?f=77" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Forum
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.facebook.com/groups/Homematic.Freunde" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Facebook Gruppe
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://join.slack.com/t/homematicuser/shared_invite/enQtNDgyNDM2OTkyMDA2LWY1YjY0NTE0NmY0OWM3YWUzMzAzMTgxYmRjMTMyOWE3NjkxNDdlMDY5ZjlhYzM5Nzg2N2U2YjdmNzNlYWNhNTU" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/HM-RedMatic/RedMatic" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Wiki</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Administration</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Beispiel Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Erweiterungen</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/wiki/Dashboard-Screenshots.html" class="sidebar-link">Dashboard</a></li><li><a href="/wiki/Homekit.html" class="active sidebar-link">HomeKit</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/Homekit.html#inhalt" class="sidebar-link">Inhalt</a></li><li class="sidebar-sub-header"><a href="/wiki/Homekit.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/wiki/Homekit.html#einrichtung" class="sidebar-link">Einrichtung</a></li></ul></li><li><a href="/wiki/Webapp.html" class="sidebar-link">WebApp</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Nutzung</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Sonstiges</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>User Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Von Usern bereitgestellte Flows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Weitere</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content default"><h1 id="redmatic-homekit"><a href="#redmatic-homekit" aria-hidden="true" class="header-anchor">#</a> RedMatic HomeKit</h1> <p>Bitte einen <a href="https://github.com/hobbyquaker/RedMatic-HomeKit/issues" target="_blank" rel="noopener noreferrer">Issue anlegen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> falls ein Gerät nicht unterstützt wird und gewünscht ist. Die bereits unterstützen Geräte sind hier ersichtlich: https://github.com/hobbyquaker/RedMatic-HomeKit/tree/master/homematic-devices</p> <h2 id="inhalt"><a href="#inhalt" aria-hidden="true" class="header-anchor">#</a> Inhalt</h2> <ul><li><a href="#installation">Installation</a></li> <li><a href="#einrichtung">Einrichtung</a></li> <li><a href="#nutzungshinweise">Nutzungshinweise</a></li> <li><a href="#tasten">Homematic Fernbedienungen/Tasten in HomeKit nutzen</a></li> <li><a href="#systemvariablen">Systemvariablen</a></li> <li><a href="#programme">CCU Programme starten</a></li> <li><a href="#universal-accessory">Universelles Accessory, Einbinden von nicht-Homematic Geräten</a> <ul><li><a href="#beispiel-contactsensor">Beispiel ContactSensor</a></li> <li><a href="#beispiel-temperaturesensor">Beispiel TemperatureSensor</a></li></ul></li> <li><a href="#camera-accessory">Camera Accessory, einbinden von Kameras</a></li> <li><a href="#reset">HomeKit Reset</a></li></ul> <h2 id="installation"><a href="#installation" aria-hidden="true" class="header-anchor">#</a> Installation</h2> <p>Im RedMatic UI (Erreichbar im CCU WebUI unter Einstellungen-&gt;Systemsteuerung) im Tab &quot;Pakete&quot; bei RedMatic-HomeKit auf den Install Button klicken, danach Node-RED neustarten.
<img src="images/homekit/homekit-install.png" alt=""></p> <h2 id="einrichtung"><a href="#einrichtung" aria-hidden="true" class="header-anchor">#</a> Einrichtung</h2> <p>Den Node <em>RedMatic HomeKit - Homematic</em> per Drag&amp;Drop einem Flow hinzufügen<br> <img src="images/homekit/homekit1.png" alt=""></p> <p>Die Konfiguration des neu hinzugefügten Node per Doppelklick öffnen, den Button mit dem Bleistift-Icon anklicken um eine neue Bridge hinzuzufügen<br> <img src="images/homekit/homekit2.png" alt=""></p> <p>Die Standardeinstellungen können beibehalten werden, mit einem Klick auf den Button <em>Add</em> wird die Bridge angelegt<br> <img src="images/homekit/homekit3.png" alt=""></p> <p>Die Konfiguration des <em>RedMatic HomeKit - Homematic</em> mit klick auf <em>Done</em> verlassen und dann den Button <em>Deploy</em> anklicken<br> <img src="images/homekit/homekit4.png" alt=""></p> <p>Nochmals die Konfiguration des <em>RedMatic HomeKit - Homematic</em> Node per Doppelklick öffnen und nochmal über den Bleistift-Button die Bridge-Konfiguration öffnen<br> <img src="images/homekit/homekit5.png" alt=""></p> <p>Bei einer erfolgreich aktivierten Bridge wird in dem Bridge Konfigurationsdialog nun ein QR-Code angezeigt<br> <img src="images/homekit/homekit6.png" alt=""></p> <h4 id="ccu-firewall"><a href="#ccu-firewall" aria-hidden="true" class="header-anchor">#</a> CCU-Firewall</h4> <p>Der in der Bridge-Konfiguration angegebene Port (Default: <code>51826</code>) und der Port für den mDNS Dienst (<code>5353</code>) müssen in der CCU Firewall freigegeben werden (falls diese über die Firewall-Richtlinie &quot;Ports blockiert&quot; aktiviert ist).
<img src="images/homekit/homekit-firewall.png" alt=""></p> <p>In der Home App oben rechts über den Plus-Button ein neues Gerät hinzufügen, den QR-Code vom Bildschirm abscannen<br> <img src="images/homekit/homekit7.png" alt=""></p> <p>Die Sicherheitswarnung bestätigen<br> <img src="images/homekit/homekit8.png" alt=""></p> <p>Nun sollten alle unterstützen Geräte der CCU in der Home App erscheinen.</p> <p><strong>Achtung</strong>: Wenn keine Geräte für HomeKit aktiviert sind (weil z.B. noch gar keine Geräte an der CCU angelernt sind oder die Checkboxen für die Geräte alle deaktiviert wurden) wird die Bridge nicht veröffentlicht und es erscheint <em>kein</em> QR-Code.</p> <h3 id="nutzungshinweise"><a href="#nutzungshinweise" aria-hidden="true" class="header-anchor">#</a> Nutzungshinweise</h3> <p>Nicht alle Änderungen an den in HomeKit bereitgestellten Accessories werden bei einem Deploy in Node-RED übernommen. <strong>Bestimmte Änderungen erfordern nach dem Deploy einen Neustart von RedMatic</strong>:</p> <ul><li>Entfernen von Geräten</li> <li>Umbenennen von Geräten</li> <li>Konfigurationsänderung an Geräten (z.B. entfernen des Boost Switch bei Thermostaten)</li> <li>Ändern der Anzahl der Tasten des Event Nodes</li> <li>Die konfigurierten Services eines &quot;Universellen Accessory&quot; ändern</li></ul> <h3 id="tasten"><a href="#tasten" aria-hidden="true" class="header-anchor">#</a> Tasten</h3> <p>Zum Auslösen von Aktionen in HomeKit über Homematic Fernbedienungen/Taster kann der Node <em>RedMatic HomeKit - Event</em> genutzt werden. Er erwartet an seinem Eingang eine Message die in <code>msg.topic</code> die zu drückende Taste und die Art des Tastendrucks (kurz/lang) enthält, z.B. <code>1/PRESS_LONG</code> für einen langen Tastendruck auf Taste 1. Dieses Topic kann direkt vom RPC Event Node erzeugt werden in dem man die Topic-Konfiguration auf <code>${channelIndex}/${datapoint}</code> setzt und den Datenpunkt mit dem regulären Ausdruck <code>PRESS_SHORT|PRESS_LONG</code> filtert:</p> <p><img src="images/homekit/fernbedienung.png" alt=""></p> <h3 id="systemvariablen"><a href="#systemvariablen" aria-hidden="true" class="header-anchor">#</a> Systemvariablen</h3> <p>(Boolsche) Systemvariablen können über den <em>Redmatic HomeKit - Switch</em> Node in HomeKit bereitgestellt werden. Hierzu werden die Ein- und Ausgänge eines <em>CCU Sysvar</em> Nodes über kreuz mit dem <em>Redmatic HomeKit - Switch</em> Node verbunden</p> <p><img src="images/homekit/homekit-sysvar.png" alt=""></p> <h3 id="programme"><a href="#programme" aria-hidden="true" class="header-anchor">#</a> Programme</h3> <p>Leider werden bisher von der Home App und Siri keine Taster unterstützt die einen Einmaligen Event erzeugen. Als Workaround steht mit dem <em>redmatic homekit - button</em> Node ein Schalter zur Verfügung der sich automatisch nach dem Anschalten zurücksetzt und so als &quot;Pseudobutton&quot; genutzt werden kann.</p> <p>Dieser kann einfach mit einem <em>ccu - program</em> Node verbunden werden, als <em>Payload</em> wird <code>timestamp</code> ausgewählt:</p> <p><img src="images/homekit/homekit-pseudobutton.png" alt=""></p> <h3 id="universal-accessory"><a href="#universal-accessory" aria-hidden="true" class="header-anchor">#</a> Universal Accessory</h3> <p>Mit dem Universal Accessory ist es möglich beliebige HomeKit-Geräte zu erzeugen, z.B. um damit auch Geräte abseits von Homematic einzubinden.</p> <p>Dem Accessory können beliebig viele Services hinzugefügt werden. Siehe dazu auch https://github.com/rdmtc/RedMatic-HomeKit/issues/44</p> <p>Verfügbare Services sowie die dafür benötigten und optionalen Characteristiken sind in dieser Datei ersichtlich: https://github.com/KhaosT/HAP-NodeJS/blob/master/src/lib/gen/HomeKit.ts</p> <p>Um eine optionale Characteristic anzulegen müssen dem Accessory direkt beim Start (z.B. über einen <em>Inject</em> Node) Messages gesendet werden.</p> <h4 id="beispiel-contactsensor"><a href="#beispiel-contactsensor" aria-hidden="true" class="header-anchor">#</a> Beispiel ContactSensor</h4> <p>Es soll ein Accessory mit einem <em>ContactSensor</em> Service angelegt werden. Die <code>0</code> vor dem Service gibt den &quot;Subtype&quot; an, dieser wird später benötigt um diesen Service anzusprechen.</p> <p><img src="images/homekit/universal-2.png" alt=""></p> <p>Aus https://github.com/KhaosT/HAP-NodeJS/blob/master/src/lib/gen/HomeKit.ts ist ersichtlich dass der Service <em>ContactSensor</em> eine Charakteristik <em>ContactSensorState</em> benötigt:</p> <p><img src="images/homekit/universal-6.png" alt=""></p> <p>In der Definition dieser Charakteristik ist ersichtlich dass diese den Wert <code>0</code> annehmen muss um einen geschlossenen Kontakt zu signalisieren und den Wert <code>1</code> um einen offenen Kontakt zu melden:</p> <p><img src="images/homekit/universal-5.png" alt=""></p> <p>Um nun einen geschlossenen Kontakt zu melden muss dem Node eine Message geschickt werden deren <code>msg.topic</code> Property sich durch den &quot;Subtype&quot; (siehe oben) und den Namen der Characteristik zusammensetzt, getrennt durch einen Slash: <code>0/ContactSensorState</code>.
Die Property <code>msg.payload</code> muss in diesem Fall auf die Number <code>0</code> gesetzt werden. Um diese beiden Properties der Message zu setzen kann ein <em>Change</em> Node genutzt werden:</p> <p><img src="images/homekit/universal-3.png" alt=""></p> <p><img src="images/homekit/universal-1.png" alt=""></p> <h5 id="flow-json"><a href="#flow-json" aria-hidden="true" class="header-anchor">#</a> Flow JSON</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>[{&quot;id&quot;:&quot;f3c1ee32.c1bdf&quot;,&quot;type&quot;:&quot;redmatic-homekit-universal&quot;,&quot;z&quot;:&quot;e679be4e.ea888&quot;,&quot;bridgeConfig&quot;:&quot;505f657d.84710c&quot;,&quot;name&quot;:&quot;ContactSensor&quot;,&quot;services&quot;:[{&quot;subtype&quot;:&quot;0&quot;,&quot;service&quot;:&quot;ContactSensor&quot;,&quot;name&quot;:&quot;Test&quot;}],&quot;x&quot;:580,&quot;y&quot;:240,&quot;wires&quot;:[[]]},{&quot;id&quot;:&quot;26ae9d08.5d6242&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;e679be4e.ea888&quot;,&quot;name&quot;:&quot;CONTACT_DETECTED&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;0&quot;,&quot;tot&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;topic&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;0/ContactSensorState&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:340,&quot;y&quot;:220,&quot;wires&quot;:[[&quot;f3c1ee32.c1bdf&quot;,&quot;55fcb00d.f7a66&quot;]]},{&quot;id&quot;:&quot;70eea6a6.faf3f8&quot;,&quot;type&quot;:&quot;change&quot;,&quot;z&quot;:&quot;e679be4e.ea888&quot;,&quot;name&quot;:&quot;CONTACT_NOT_DETECTED&quot;,&quot;rules&quot;:[{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;payload&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;1&quot;,&quot;tot&quot;:&quot;num&quot;},{&quot;t&quot;:&quot;set&quot;,&quot;p&quot;:&quot;topic&quot;,&quot;pt&quot;:&quot;msg&quot;,&quot;to&quot;:&quot;0/ContactSensorState&quot;,&quot;tot&quot;:&quot;str&quot;}],&quot;action&quot;:&quot;&quot;,&quot;property&quot;:&quot;&quot;,&quot;from&quot;:&quot;&quot;,&quot;to&quot;:&quot;&quot;,&quot;reg&quot;:false,&quot;x&quot;:320,&quot;y&quot;:260,&quot;wires&quot;:[[&quot;f3c1ee32.c1bdf&quot;,&quot;55fcb00d.f7a66&quot;]]},{&quot;id&quot;:&quot;92689c97.a698c&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;e679be4e.ea888&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;date&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;onceDelay&quot;:0.1,&quot;x&quot;:100,&quot;y&quot;:220,&quot;wires&quot;:[[&quot;26ae9d08.5d6242&quot;]]},{&quot;id&quot;:&quot;7cbf7fe8.59d9&quot;,&quot;type&quot;:&quot;inject&quot;,&quot;z&quot;:&quot;e679be4e.ea888&quot;,&quot;name&quot;:&quot;&quot;,&quot;topic&quot;:&quot;&quot;,&quot;payload&quot;:&quot;&quot;,&quot;payloadType&quot;:&quot;date&quot;,&quot;repeat&quot;:&quot;&quot;,&quot;crontab&quot;:&quot;&quot;,&quot;once&quot;:false,&quot;onceDelay&quot;:0.1,&quot;x&quot;:100,&quot;y&quot;:260,&quot;wires&quot;:[[&quot;70eea6a6.faf3f8&quot;]]},{&quot;id&quot;:&quot;55fcb00d.f7a66&quot;,&quot;type&quot;:&quot;debug&quot;,&quot;z&quot;:&quot;e679be4e.ea888&quot;,&quot;name&quot;:&quot;&quot;,&quot;active&quot;:true,&quot;tosidebar&quot;:true,&quot;console&quot;:false,&quot;tostatus&quot;:false,&quot;complete&quot;:&quot;true&quot;,&quot;x&quot;:560,&quot;y&quot;:320,&quot;wires&quot;:[]},{&quot;id&quot;:&quot;505f657d.84710c&quot;,&quot;type&quot;:&quot;redmatic-homekit-bridge&quot;,&quot;z&quot;:&quot;&quot;,&quot;name&quot;:&quot;RedMatic Test Bridge&quot;,&quot;username&quot;:&quot;CC:22:3D:00:F6:05&quot;,&quot;pincode&quot;:&quot;964-84-514&quot;,&quot;port&quot;:&quot;51826&quot;}]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="beispiel-temperaturesensor"><a href="#beispiel-temperaturesensor" aria-hidden="true" class="header-anchor">#</a> Beispiel TemperatureSensor</h4> <h3 id="camera-accessory"><a href="#camera-accessory" aria-hidden="true" class="header-anchor">#</a> Camera Accessory</h3> <p>Anleitung von nicolas-eric: https://github.com/rdmtc/RedMatic/wiki/Homekit-Kamera-einbinden</p> <p>Siehe auch:</p> <ul><li>https://github.com/rdmtc/RedMatic-HomeKit/issues/125#issuecomment-466550728</li> <li><a href="https://homematic-forum.de/forum/viewtopic.php?f=77&amp;t=50935" target="_blank" rel="noopener noreferrer">Homematic-Forum - Homekit Popup Bild bei Bewegung<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="reset"><a href="#reset" aria-hidden="true" class="header-anchor">#</a> Reset</h3> <p>Um die Bridge im Fall von schwerwiegenden Problemen (&quot;sollte&quot; nicht passieren, aber man weiss ja nie 😉) komplett zurückzusetzen kann wie folgt vorgegangen werden:</p> <ul><li>Bridge in iOS Home App löschen</li> <li>RedMatic stoppen</li> <li>Auf der CCU das Verzeichnis <code>/usr/local/addons/redmatic/var/homekit</code> mitsamt Inhalt löschen</li> <li>RedMatic starten</li></ul> <p>Hierbei gehen alle Raum-Zuordnungen sowie Umbenennungen in HomeKit verloren!</p></div> <!----> <!----> </div></div><div class="global-ui"></div></div>
    <script src="/assets/js/2.c7572858.js" defer></script><script src="/assets/js/5.057cfdf0.js" defer></script><script src="/assets/js/74.8c03db03.js" defer></script><script src="/assets/js/app.6e49cc76.js" defer></script>
  </body>
</html>
