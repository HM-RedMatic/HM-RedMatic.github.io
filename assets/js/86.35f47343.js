(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{229:function(e,t,n){"use strict";n.r(t);var i={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},a=n(6),r=Object(a.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.slotKey}},[n("h1",{attrs:{id:"openweathermap-mit-virtuellem-cuxd-device-und-systemvariablen-nutzen"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#openweathermap-mit-virtuellem-cuxd-device-und-systemvariablen-nutzen","aria-hidden":"true"}},[e._v("#")]),e._v(" Openweathermap mit Virtuellem CUxD Device und Systemvariablen nutzen")]),e._v(" "),n("h2",{attrs:{id:"voraussetzungen"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#voraussetzungen","aria-hidden":"true"}},[e._v("#")]),e._v(" Voraussetzungen")]),e._v(" "),n("ul",[n("li",[e._v("OpenWeatherMap "),n("a",{attrs:{href:"http://openweathermap.org/appid",target:"_blank",rel:"noopener noreferrer"}},[e._v("API Key (kostenlos) bekommen"),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v("Deine Station ID: steht in der URL wenn du nach einer Seite suchst: https://openweathermap.org/city/2867714")])]),e._v(" "),n("h2",{attrs:{id:"ccu-vorbereiten"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ccu-vorbereiten","aria-hidden":"true"}},[e._v("#")]),e._v(" CCU vorbereiten")]),e._v(" "),n("ul",[n("li",[e._v("auf der WebUI Oberfläche unter "),n("code",[e._v("Startseite > Einstellungen > Systemsteuerung > Zusatssoftware")]),e._v(" die folgenden Plun´gins installieren\n"),n("ul",[n("li",[e._v("CUxD AddOn "),n("a",{attrs:{href:"https://homematic-forum.de/forum/viewtopic.php?f=37&t=15298",target:"_blank",rel:"noopener noreferrer"}},[e._v("installieren"),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v("Redmatic AddOn "),n("a",{attrs:{href:"https://github.com/rdmtc/RedMatic/wiki/Installation",target:"_blank",rel:"noopener noreferrer"}},[e._v("installieren"),n("OutboundLink")],1)])])])]),e._v(" "),n("h2",{attrs:{id:"cuxd-vorbereiten"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cuxd-vorbereiten","aria-hidden":"true"}},[e._v("#")]),e._v(" CUxD vorbereiten")]),e._v(" "),n("ul",[n("li",[e._v("Die CUx-Daemon Oberfläche aufrufen (WebUI unter "),n("code",[e._v("Startseite > Einstellungen > Systemsteuerung > CUx-Daemon")])]),e._v(" "),n("li",[e._v('Unter Geräte ein neues Gerät "90 Universal Wrapper Device" anlegen und vom Typ Thermostat:')])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55945008-2f280d00-5c4a-11e9-87cd-ccae043aaed3.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("Auf der CCU im Posteingang unter "),n("code",[e._v("Startseite > Einstellungen >Geräte - Posteingang")]),e._v(" das Gerät konfigurieren\n"),n("ul",[n("li",[e._v("Mode Temp & Humid")]),e._v(" "),n("li",[e._v("Haken bei "),n("code",[e._v("USE_HMADAPT")]),e._v(" entfernen")]),e._v(" "),n("li",[e._v("Haken bei "),n("code",[e._v("zyklische Statusmeldung")]),e._v(" und "),n("code",[e._v("WEATHER|STATISTIC")]),e._v(" setzen")])])])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55945156-84fcb500-5c4a-11e9-8a36-cf622a659fef.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("Im Posteingang Fertig wählen.")])]),e._v(" "),n("h2",{attrs:{id:"redmatic-vorbereiten"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redmatic-vorbereiten","aria-hidden":"true"}},[e._v("#")]),e._v(" RedMatic vorbereiten")]),e._v(" "),n("ul",[n("li",[e._v("Redmatic aufrufen (WebUI unter "),n("code",[e._v("Startseite > Einstellungen > Systemsteuerung > Redmatic")])]),e._v(" "),n("li",[e._v("Wenn Redmatic nicht läuft starten.")]),e._v(" "),n("li",[e._v("Node-Red aufrufen")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55945658-867aad00-5c4b-11e9-81e5-908643c215e6.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[n("p",[e._v("In Node-Red die Node "),n("code",[e._v("node-red-node-openweathermap")]),e._v(" "),n("a",{attrs:{href:"https://github.com/rdmtc/RedMatic/wiki/Node-Installation",target:"_blank",rel:"noopener noreferrer"}},[e._v("installieren"),n("OutboundLink")],1)])]),e._v(" "),n("li",[n("p",[e._v("einen neuen Flow erstellen oder den Flow aufrufen in dem die Nodes ablegen möchte")])]),e._v(" "),n("li",[n("p",[e._v("aus der Palette die OpenWeathermap Node ohne Eingang in den Flow ziehen")])])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55947620-1e2dca80-5c4f-11e9-92ac-31f6c257d3c2.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("nach dem ablegen die Node doppelklicken, es öffnet sich die Seitenleiste mit den EInstellungen")]),e._v(" "),n("li",[e._v("in der Seitenleiste den API key eintragen, den Ort wählen entweder über koordinaten oder den Namen")]),e._v(" "),n("li",[e._v("in der Seitenleiste fertig wählen")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55946175-78795c00-5c4c-11e9-8419-7eba77dafba6.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("Eine Change Node und eine CCU Value Node in den Flow ziehen")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55946365-e3c32e00-5c4c-11e9-86ae-ff5f040b06e4.png",alt:"image"}}),e._v(" "),n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55946460-0d7c5500-5c4d-11e9-965d-913df93ae0d1.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("die Nodes Verbinden")]),e._v(" "),n("li",[e._v("die change Node doppelt klicken und den "),n("code",[e._v("msg.payload")]),e._v(" auf den Wert "),n("code",[e._v("msg.payload.tempc")]),e._v(" setzen:")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55946893-c5a9fd80-5c4d-11e9-846d-33030635155d.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("die value-node doppelt klicken und die CCU Einstellungen überprüfen")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55946940-e2463580-5c4d-11e9-97dc-93589b9eab1b.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("Hier prüfen ob der Haken bei CUxD gesetzt ist, Wenn nicht diesen setzen und mit "),n("code",[e._v("Aktualisieren")]),e._v(" die Node schließen:")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55947201-5254bb80-5c4e-11e9-88ee-c312feb8be35.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("den Value Node mit Fertig schließen")]),e._v(" "),n("li",[e._v("den "),n("code",[e._v("Deploy")]),e._v(" oder "),n("code",[e._v("Implementieren")]),e._v(" Button betätigen, damit die Änderungen erst mal gespeichert werden")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55947392-a6f83680-5c4e-11e9-8f99-b37d35381e41.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("Nochmals den  "),n("code",[e._v("Deploy")]),e._v(" oder "),n("code",[e._v("Implementieren")]),e._v(" Button betätigen, diesmal den kleinen Pfeil am Ende")]),e._v(" "),n("li",[e._v("im sich öffnednen Menü die Flows neu starten (das ist nötig, damit das neu angelegte CUxD Device in der Auswahl erscheint)")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55947485-d018c700-5c4e-11e9-8d30-26c677a792a2.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("die value-node doppelt klicken und konfigurieren\n"),n("ul",[n("li",[e._v("Unter Interface CUxD wählen")]),e._v(" "),n("li",[e._v("under channel den Kanal "),n("strong",[e._v("1")]),e._v(" des erstellten CUxD Devices wählen (wenn man anfängt einen Teil des Namens einzugeben öffnet sich eine Auswahlliste)")]),e._v(" "),n("li",[e._v("unter datapoint "),n("code",[e._v("SET_TEMPERATURE")]),e._v(" wählen")]),e._v(" "),n("li",[e._v("mit fertig schließen")])])])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55947858-972d2200-5c4f-11e9-9943-79047950dc76.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("in den Flow eine weitere change und eine weitere value node ziehen und wie folgt verbinden:")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55947972-d78ca000-5c4f-11e9-9a5c-2bb41ad762ad.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("die neue Change Node doppelt klicken und den "),n("code",[e._v("msg.payload")]),e._v(" auf den Wert "),n("code",[e._v("msg.payload.humidity")]),e._v(" setzen und mit fertig schließen:")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55948052-00149a00-5c50-11e9-9e47-e897f208f8c2.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("die neue value-node doppelt klicken und konfigurieren\n"),n("ul",[n("li",[e._v("Unter Interface CUxD wählen")]),e._v(" "),n("li",[e._v("under channel den Kanal "),n("strong",[e._v("1")]),e._v(" des erstellten CUxD Devices wählen (wenn man anfängt einen Teil des Namens einzugeben öffnet sich eine Auswahlliste)")]),e._v(" "),n("li",[e._v("unter datapoint "),n("code",[e._v("SET_HUMIDITY")]),e._v(" wählen")]),e._v(" "),n("li",[e._v("mit fertig schließen")])])])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55948141-318d6580-5c50-11e9-8b9a-67e15f03cc7e.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("Mit dem "),n("code",[e._v("Deploy")]),e._v(" oder "),n("code",[e._v("Implementieren")]),e._v(" Button die Änderung abschließen")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55947392-a6f83680-5c4e-11e9-8f99-b37d35381e41.png",alt:"image"}})]),e._v(" "),n("h2",{attrs:{id:"erweiterung-mit-systemvariablen"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erweiterung-mit-systemvariablen","aria-hidden":"true"}},[e._v("#")]),e._v(" Erweiterung mit Systemvariablen")]),e._v(" "),n("ul",[n("li",[e._v("Genauso wie das CUxD Device kann man auch Systemvariablen mit den Wetterdaten auf der CCU füllen.\n"),n("ul",[n("li",[e._v("dazu muss man lediglich anstelle der CCU value node die sysvar node nutzen")])])])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55948566-1bcc7000-5c51-11e9-82ce-73fc2eda1358.png",alt:"image"}})]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/55948610-343c8a80-5c51-11e9-8f1b-a85b27e93df2.png",alt:"image"}})]),e._v(" "),n("ul",[n("li",[e._v("Die sysvar node lässt sich einfach konfigurieren. Hier muss lediglich die Systemvariable aufgewählt werden. (Wenn diese fehlt einfach mal die Node-Red Flows wie oben beschrieben neu starten)")])]),e._v(" "),n("p",[e._v("Im Change node kann dann neben "),n("code",[e._v("msg.payload.tempc")]),e._v(" oder "),n("code",[e._v("msg.payload.humidity")]),e._v(" die folgenden Daten von Openweathermap ebenfalls in Systemvariablen abgelegt werden:")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("msg.payload.weather")]),e._v(" - Wetterlage, Beispiel "),n("code",[e._v("Clouds")])]),e._v(" "),n("li",[n("code",[e._v("msg.payload.detail")]),e._v(" - Wetterlage, Beispiel "),n("code",[e._v("Ein paar Wolken")])]),e._v(" "),n("li",[n("code",[e._v("msg.payload.weather")]),e._v(" - Wetterlage, Beispiel "),n("code",[e._v("Clouds")])]),e._v(" "),n("li",[n("code",[e._v("msg.payload.tempk")]),e._v(" - Temperatur in Kelvin")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.tempc")]),e._v(" - Temperatur in Celsius")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.temp_maxc")]),e._v(" - maximale Temperatur in Celsius")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.temp_minc")]),e._v(" - minimale Temperatur in Celsius")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.maxtemp")]),e._v(" - maximale Temperatur in Celsius")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.mintemp")]),e._v(" - minimale Temperatur in Celsius")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.windspeed")]),e._v(" - Windgeschwindigkeit")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.winddirection")]),e._v(" - Windrichtung")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.location")]),e._v(" - Position der Wetterstation")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.clouds")]),e._v(" - Bewölkung in %")]),e._v(" "),n("li",[n("code",[e._v("msg.payload.description")]),e._v(' - Beschreibung des Wetters, Beispiel: "The weather in Umbuktu at coordinates: 31.95, 72.74 is Clouds (Ein paar Wolken)."')])])])},[],!1,null,null,null);r.options.__file="Openweathermap.md";t.default=r.exports}}]);