(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{242:function(e,n,t){"use strict";t.r(n);var i={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},r=t(6),s=Object(r.a)(i,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.slotKey}},[t("h1",{attrs:{id:"ausfuhren-von-funktionen-in-definierten-zeitfenstern"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ausfuhren-von-funktionen-in-definierten-zeitfenstern","aria-hidden":"true"}},[e._v("#")]),e._v(" Ausführen von Funktionen in definierten Zeitfenstern")]),e._v(" "),t("p",[e._v("Dieser Flow stellt exemplarisch dar, wie Funktionen an Zeitfenster geknüpft werden können. Dafür werden beispielhaft zwei Szenarien dargestellt.")]),e._v(" "),t("h2",{attrs:{id:"inhalt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inhalt","aria-hidden":"true"}},[e._v("#")]),e._v(" Inhalt")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Gartenbeleuchtung"}},[e._v("Steuerung der Außenbeleuchtung - AstroFunktion")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#Hofbeleuchtung"}},[e._v("Bewegungsmelder für Beleuchtung im Hof (Nachts)")])])]),e._v(" "),t("h2",{attrs:{id:"gartenbeleuchtung"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gartenbeleuchtung","aria-hidden":"true"}},[e._v("#")]),e._v(" Gartenbeleuchtung")]),e._v(" "),t("p",[e._v("In RedMatic ist der Node "),t("a",{attrs:{href:"https://flows.nodered.org/node/node-red-contrib-sun-position",target:"_blank",rel:"noopener noreferrer"}},[e._v("node-red-contrib-sun-position"),t("OutboundLink")],1),e._v(" integriert. Diese Sammlung von Nodes ermöglicht es sehr ausführliche Zeitsteuerung. Der darin enthaltene within-time-switch Node ermöglicht es sowohl Zeitfenster selbst festzulegen als auch Zeitfenster an Hand des Sonnenstandes zu ermitteln. Dafür stehen die unterschiedlichen definierten Sonnenauf- und untergänge als Start- bzw. End-Time zur Verfügung, zum besseren Verständnis empfehle ich folgenden Link: "),t("a",{attrs:{href:"https://www.timeanddate.de/astronomie/daemmerung-phasen",target:"_blank",rel:"noopener noreferrer"}},[e._v("Dämmerung – die drei Dämmerungsphasen"),t("OutboundLink")],1),e._v(".\nZusätzlich ist auch möglich den Mond ufgang oder untergang genutzt werden oder verschiedene Zeiten für Feiertage oder Wochenende.")]),e._v(" "),t("h3",{attrs:{id:"flow-mit-der-within-time-switch-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flow-mit-der-within-time-switch-node","aria-hidden":"true"}},[e._v("#")]),e._v(" Flow mit der within-time-switch node")]),e._v(" "),t("p",[e._v("Im folgenden Flow wird jeden Tag nach zivilem Sonnenuntergang die Beleuchtung im Garten eingeschaltet und nach zivilem Sonnenaufgang die Beleuchtung im Garten deaktiviert.\n"),t("img",{attrs:{src:"https://user-images.githubusercontent.com/12249109/47701541-71b8d880-dc1a-11e8-88b1-ce446543640d.png",alt:"image"}})]),e._v(" "),t("p",[e._v("Das Programm wird minütlich per InjectNode aufgerufen, Konfiguration des Nodes siehe hier:")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12249109/47701596-9dd45980-dc1a-11e8-8018-563df4836266.png",alt:"image"}})]),e._v(" "),t("p",[e._v("Minütlich wird somit der within-time-switch Node angestoßen, dieser muss wie im folgenden Bild eingestellt werden.")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12249109/47701604-a62c9480-dc1a-11e8-83c7-0403ac0dc9f9.png",alt:"image"}})]),e._v(" "),t("p",[e._v("Zur Erklärung.\nZum einen muss man definieren welcher Ort zur Bestimmung der AstroDaten verwendet werden soll. Wollt Ihr Zeitfenster selbst definieren könnt ihr die Einstellung an dieser Stelle überspringen.")]),e._v(" "),t("p",[e._v("Ich habe für meinen Anwendungsfall "),t("strong",[e._v("start-time")]),e._v(" als "),t("strong",[e._v("sunset")]),e._v(" definiert, laut info des Nodes ist dies die "),t("strong",[e._v("zivile Abenddämmerung.")]),e._v(" "),t("strong",[e._v("End-Time "),t("strong",[e._v("ist")]),e._v(" dawn")]),e._v(", dies entspricht dem "),t("strong",[e._v("zivilen Sonnenaufgang")]),e._v(". Somit wird jeden Abend wenn die Dämmerung einsetzt und die Dunkelheit beginnt die Beleuchtung im Garten eingeschaltet, sollte die Morgendämmerung eingesetzt haben werden die Lampen deaktiviert.")]),e._v(" "),t("p",[e._v("Je nach zutreffender Bedingung hat der Node zwei Ausgänge. An diese Ausgänge setze ich den Aktor welchen ich schalten mag.")]),e._v(" "),t("p",[e._v("Per change-node wird nun der zu treffende Schaltstatus definiert, im Beispielbild wird "),t("strong",[e._v("msg.payload")]),e._v(" auf "),t("strong",[e._v("true")]),e._v(" gesetzt. "),t("strong",[e._v("Das Licht soll angeschaltet werden")]),e._v(". "),t("em",[e._v("Sollte das Licht ausgeschaltet werden sollen muss msg.payload auf false gesetzt werden.")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12249109/47701946-cc9eff80-dc1b-11e8-90e6-03ee3c488ded.png",alt:"image"}})]),e._v(" "),t("p",[e._v("Abschließend noch die Konfiguration des ccu-value nodes")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12249109/47701955-d294e080-dc1b-11e8-9705-1e2eda6f7ea4.png",alt:"image"}})]),e._v(" "),t("h3",{attrs:{id:"flow-mit-der-node-red-contrib-sun-position-nodes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flow-mit-der-node-red-contrib-sun-position-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Flow mit der "),t("a",{attrs:{href:"https://flows.nodered.org/node/node-red-contrib-sun-position",target:"_blank",rel:"noopener noreferrer"}},[e._v("node-red-contrib-sun-position"),t("OutboundLink")],1),e._v(" nodes")]),e._v(" "),t("p",[e._v("mit Hilfe des time-inject nodes lässt sich das stark vereinfachen:")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/48482183-4c2df080-e810-11e8-8983-a9cade14dd6c.png",alt:"image"}})]),e._v(" "),t("p",[e._v("Die time-inject Nodes senden eine Nachricht beim erreichen der eingestellten zeit gleich mit dem richtigen payload:")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/48482268-87302400-e810-11e8-995b-b09c18bd6a8a.png",alt:"image"}})]),e._v(" "),t("p",[e._v("Die Einstellung für die Position wird hier zentral über eine extra Konfiguration gehandelt und muss nicht in jeder Node einzeln konfiguriert werden.")]),e._v(" "),t("h4",{attrs:{id:"verschiedene-zeiten-fur-wochenende"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verschiedene-zeiten-fur-wochenende","aria-hidden":"true"}},[e._v("#")]),e._v(" verschiedene Zeiten für Wochenende")]),e._v(" "),t("p",[e._v("Dies lässt sich mit Hilfe der Auswahl der Tage und entsprechend mehr time-inject nodes realisieren:")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/48483980-33740980-e815-11e8-850a-71538a9cd038.png",alt:"image"}})]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/48484053-64543e80-e815-11e8-889f-644fd8703d7b.png",alt:"image"}})]),e._v(" "),t("p",[t("img",{attrs:{src:"https://user-images.githubusercontent.com/12692680/48484087-7f26b300-e815-11e8-82d0-069a97ea146c.png",alt:"image"}})]),e._v(" "),t("h4",{attrs:{id:"verschiedene-zeiten-fur-feiertage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verschiedene-zeiten-fur-feiertage","aria-hidden":"true"}},[e._v("#")]),e._v(" verschiedene Zeiten für Feiertage")]),e._v(" "),t("p",[t("em",[t("strong",[e._v("noch offen")])])]),e._v(" "),t("h2",{attrs:{id:"gartenbeleuchtung-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gartenbeleuchtung-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Gartenbeleuchtung")]),e._v(" "),t("p",[t("em",[t("strong",[e._v("ausstehend.")])])])])},[],!1,null,null,null);s.options.__file="Flow-within-time.md";n.default=s.exports}}]);