(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{297:function(t,n,s){"use strict";s.r(n);var a={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=s(6),i=Object(e.a)(a,function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[s("h1",{attrs:{id:"bidcos-wired-dimmer-mit-bidcos-rf-tasten-steuern"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bidcos-wired-dimmer-mit-bidcos-rf-tasten-steuern","aria-hidden":"true"}},[t._v("#")]),t._v(" Bidcos-Wired Dimmer mit Bidcos-RF Tasten steuern")]),t._v(" "),s("p",[t._v("Da sich Bidcos-Wired Dimmer nicht mit Funk-Fernbedienungen/Tastern Verknüpfen lassen ist es von Haus aus nicht möglich über langen Tastendruck auf. und ab zu dimmen. Eine Lösung für dieses Problem ist die Verwendung von Direktverknüpfungen zwischen virtuellen Wired Tasten und den Dimmern die dann über die "),s("code",[t._v("PRESS_CONT")]),t._v(" Events von Bidcos-RF Tasten angesteuert werden. Weitere wichtige Informationen zu den "),s("code",[t._v("PRESS_CONT")]),t._v(" Events siehe https://github.com/hobbyquaker/RedMatic/issues/61")]),t._v(" "),s("h3",{attrs:{id:"direktverknupfungen-mit-virtuellen-tasten"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#direktverknupfungen-mit-virtuellen-tasten","aria-hidden":"true"}},[t._v("#")]),t._v(" Direktverknüpfungen mit virtuellen Tasten")]),t._v(" "),s("p",[t._v("Zuerst müssen entsprechende Direktverknüpfungen angelegt werden, es ist jeweils eine virtuelle Taste für das hoch- und eine für das runter-dimmen notwendig:")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/wired-dim-1.png",alt:""}})]),t._v(" "),s("p",[t._v("In den Verknüpfungsprofil ist auf kurzen Tastendruck das an- bzw ausschalten konfiguriert, ein langer Tastendruck Dimmt um 3% hoch bzw. runter:")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/wired-dim-2.png",alt:""}}),t._v(" "),s("img",{attrs:{src:"images/wired-dim-3.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"node-red-flow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-red-flow","aria-hidden":"true"}},[t._v("#")]),t._v(" Node-RED Flow")]),t._v(" "),s("p",[t._v('Der Flow der nun diese virtuellen Tasten "bedient" besteht aus 4 Nodes, einem '),s("code",[t._v("RPC Event")]),t._v(" Node der alle BidCos-RF "),s("code",[t._v("PRESS_*")]),t._v(" Events abonniert, einem "),s("code",[t._v("Function")]),t._v(" Node der die Zuordnung der RF-Tasten zu den Wired-Verknüpfungen beinhaltet, einem "),s("code",[t._v("Throttle")]),t._v(" Node (muss nachinstalliert werden: https://flows.nodered.org/node/node-red-contrib-throttle) der die Anzahl der Tastendrücke auf ~3 pro Sekunde limitiert und einem "),s("code",[t._v("Value")]),t._v(" Node der schlussendlich den Tastendruck an den Wired-Schnittstellenprozess sendet.")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/wired-dim-4.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"ccu-rpc-event-node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ccu-rpc-event-node","aria-hidden":"true"}},[t._v("#")]),t._v(" CCU RPC Event Node")]),t._v(" "),s("p",[t._v("Es wird eine Filterung des Datenpunkts über einen Regulären Ausdruck vorgenommen um Events aller Datenpunkte zu erhalten die mit "),s("code",[t._v("PRESS_")]),t._v(" beginnen")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/wired-dim-5.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"function-node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#function-node","aria-hidden":"true"}},[t._v("#")]),t._v(" Function Node")]),t._v(" "),s("div",{staticClass:"language-Javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" map "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'Displaytaster Säule:7'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Esstisch DimDown'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'Displaytaster Säule:8'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Esstisch DimUp'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'Displaytaster Säule:9'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Küche DimDown'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'Displaytaster Säule:10'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Küche DimUp'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v('"Displaytaster Säule:11"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Licht Wohnzimmer DimDown"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v('"Displaytaster Säule:12"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Licht Wohnzimmer DimUp"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v('"RC19:3"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Licht Wohnzimmer DimDown"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v('"RC19:4"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Licht Wohnzimmer DimUp"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'RC19:5'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Esstisch DimDown'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'RC19:6'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Esstisch DimUp'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'RC19:7'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Küche DimDown'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'RC19:8'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Küche DimUp'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'RC19:11'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Treppenhaus DimDown'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v("'RC19:12'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Licht Treppenhaus DimUp'")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     \n"),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("channelName"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datapoint"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'PRESS_'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" datapoint "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datapoint"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("datapoint "),s("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'PRESS_CONT'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        datapoint "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'PRESS_LONG'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    msg "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("assign")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("datapoint"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("channelName"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" map"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("channelName"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" msg"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("h4",{attrs:{id:"throttle-node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#throttle-node","aria-hidden":"true"}},[t._v("#")]),t._v(" Throttle Node")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/wired-dim-6.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"ccu-value-node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ccu-value-node","aria-hidden":"true"}},[t._v("#")]),t._v(" CCU Value Node")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/wired-dim-7.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"flow-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flow-json","aria-hidden":"true"}},[t._v("#")]),t._v(" Flow JSON")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[{"id":"58073bb7.f13654","type":"tab","label":"Wired Dimmer","disabled":false,"info":""},{"id":"4e9d1e2e.351c2","type":"function","z":"58073bb7.f13654","name":"Mapping","func":"const map = {\\n    \'Displaytaster Säule:7\': \'Licht Esstisch DimDown\',\\n    \'Displaytaster Säule:8\': \'Licht Esstisch DimUp\',\\n    \'Displaytaster Säule:9\': \'Licht Küche DimDown\',\\n    \'Displaytaster Säule:10\': \'Licht Küche DimUp\',\\n    \\"Displaytaster Säule:11\\": \\"Licht Wohnzimmer DimDown\\",\\n    \\"Displaytaster Säule:12\\": \\"Licht Wohnzimmer DimUp\\",\\n    \\"RC19:3\\": \\"Licht Wohnzimmer DimDown\\",\\n    \\"RC19:4\\": \\"Licht Wohnzimmer DimUp\\",\\n    \'RC19:5\': \'Licht Esstisch DimDown\',\\n    \'RC19:6\': \'Licht Esstisch DimUp\',\\n    \'RC19:7\': \'Licht Küche DimDown\',\\n    \'RC19:8\': \'Licht Küche DimUp\',\\n    \'RC19:11\': \'Licht Treppenhaus DimDown\',\\n    \'RC19:12\': \'Licht Treppenhaus DimUp\'\\n};\\n     \\nif (map[msg.channelName] && msg.datapoint.startsWith(\'PRESS_\')) {\\n    let datapoint = msg.datapoint;\\n    if (datapoint === \'PRESS_CONT\') {\\n        datapoint = \'PRESS_LONG\';\\n    }\\n    if (msg.deviceType === \'HM-RC-19-SW\' && datapoint === \'PRESS_LONG_RELEASE\') {\\n        datapoint = \'PRESS_LONG\';\\n    }\\n\\n    msg = Object.assign({datapoint, payload: true}, {channelName: map[msg.channelName]});\\n\\n    \\n    return msg;\\n}\\n\\n","outputs":1,"noerr":0,"x":380,"y":200,"wires":[["9b70f0e3.0fd94"]]},{"id":"3a48b857.604a68","type":"ccu-rpc-event","z":"58073bb7.f13654","name":"BidCos-RF PRESS_*","iface":"BidCos-RF","ccuConfig":"38263145.35ea0e","rooms":"","roomsRx":"str","functions":"","functionsRx":"str","device":"","deviceRx":"str","deviceName":"","deviceNameRx":"str","deviceType":"","deviceTypeRx":"str","channel":"","channelRx":"str","channelName":"","channelNameRx":"str","channelType":"","channelTypeRx":"str","datapoint":"^PRESS_.*","datapointRx":"re","change":false,"working":false,"cache":false,"topic":"${CCU}/${Interface}/${channelName}/${datapoint}","x":250,"y":140,"wires":[["4e9d1e2e.351c2"]]},{"id":"8477b989.505c08","type":"ccu-value","z":"58073bb7.f13654","name":"BidCos-Wired","iface":"BidCos-Wired","channel":"","datapoint":"","mode":"","start":true,"change":true,"cache":false,"on":0,"onType":"undefined","ramp":0,"rampType":"undefined","working":false,"ccuConfig":"38263145.35ea0e","topic":"${CCU}/${Interface}/${channel}/${datapoint}","x":620,"y":320,"wires":[[]]},{"id":"9b70f0e3.0fd94","type":"_throttle","z":"58073bb7.f13654","name":"","nbWaitUnits":"300","waitUnits":"milliseconds","leading":true,"trailing":false,"x":490,"y":260,"wires":[["8477b989.505c08"]]},{"id":"38263145.35ea0e","type":"ccu-connection","z":"","name":"localhost","host":"localhost","regaEnabled":true,"bcrfEnabled":true,"iprfEnabled":true,"virtEnabled":true,"bcwiEnabled":true,"cuxdEnabled":false,"regaPoll":true,"regaInterval":"30","rpcPingTimeout":"60","rpcInitAddress":"127.0.0.1","rpcServerHost":"127.0.0.1","rpcBinPort":"2047","rpcXmlPort":"2048","contextStore":""}]\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])])},[],!1,null,null,null);i.options.__file="Flow-Wired-Dimmer.md";n.default=i.exports}}]);