(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{221:function(e,n,t){"use strict";t.r(n);var r={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},a=t(6),i=Object(a.a)(r,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.slotKey}},[t("h3",{attrs:{id:"_1-node-installieren"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-node-installieren","aria-hidden":"true"}},[e._v("#")]),e._v(" 1) Node installieren")]),e._v(" "),t("h3",{attrs:{id:"_2-telegrambot-erstellen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-telegrambot-erstellen","aria-hidden":"true"}},[e._v("#")]),e._v(" 2) Telegrambot erstellen")]),e._v(" "),t("h3",{attrs:{id:"_3-einfacher-flow-zum-nachrichten-versenden"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-einfacher-flow-zum-nachrichten-versenden","aria-hidden":"true"}},[e._v("#")]),e._v(" 3) Einfacher Flow zum Nachrichten versenden")]),e._v(" "),t("h3",{attrs:{id:"_4-weiterfuhrende-informationen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-weiterfuhrende-informationen","aria-hidden":"true"}},[e._v("#")]),e._v(" 4) Weiterführende Informationen")]),e._v(" "),t("hr"),e._v(" "),t("h3",{attrs:{id:"_1-node-installieren-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-node-installieren-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 1) Node installieren")]),e._v(" "),t("p",[e._v("In Node-Red rechts oben auf den Menübotton klicken. Auf “Manage palette“ klicken und anschließend im Tab „Install“ folgenden Node suchen und installieren: node-red-contrib-telegrambot.")]),e._v(" "),t("h3",{attrs:{id:"_2-telegrambot-erstellen-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-telegrambot-erstellen-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 2) Telegrambot erstellen")]),e._v(" "),t("p",[e._v("Zuerst in Telegram den Nutzer @botfather hinzufügen. Anschließend kann man den Bot erstellen, indem man dem neuen Nutzer Botfather fogende Nachricht schickt: „/newbot“. Auf Nachfrage den Bot-Namen vergeben (letzterer muss auf „bot“ enden). Nun bekommt Ihr den API-Token, der den Bot eindeutig identifiziert. Um eine Nachricht an einen Telegram-Chat senden zu können wird die entsprechende Chat-ID benötigt. Der einfachste Weg diese zu erhalten, ist dem Nutzer „FalconGate“ (welcher ebenfalls ein Bot ist) zu suchen und ihm folgende Nachricht zu schicken „/get_my_id“.")]),e._v(" "),t("h3",{attrs:{id:"_3-einfacher-flow-zum-nachrichten-versenden-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-einfacher-flow-zum-nachrichten-versenden-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 3) Einfacher Flow zum Nachrichten versenden")]),e._v(" "),t("p",[e._v("Zunächst mittels eines value node ein Ereignis abfragen (siehe Screenshot).\n"),t("img",{attrs:{src:"https://user-images.githubusercontent.com/44581521/50490569-0fa80400-0a0e-11e9-9366-67812dc30daf.png",alt:""}}),e._v("\nDamit einer Nachricht mittels des „sender“ nodes versendet werden kann, benötigt letzterer Node drei wichtige Informationen: die Chat ID, die Art der Nachricht und den Inhalt der Nachricht. Diese Infos können unter anderem mittels eines change nodes übergeben werden. Zunächst muss der aktuelle Inhalt des payload gelöscht werden und anschließend können die benötigten Informationen hinzugefügt werden (siehe Screenshot).\n"),t("img",{attrs:{src:"https://user-images.githubusercontent.com/44581521/50490575-15054e80-0a0e-11e9-8eb3-f8f4586a172d.png",alt:""}}),e._v("\nAlternativ kann auch ein function node benutzt werden der folgenden Code zum Inhalt hat:")]),e._v(" "),t("p",[e._v("return {\npayload: {\nchatId: 255677735,\ntype: 'message',\ncontent: 'mein text'\n}\n};")]),e._v(" "),t("p",[e._v("Zuletzt muss noch die Nachricht versendet werden. Hierzu ist es notwendig den change node (oder function node) mit einem „sender“ node zu verbinden. Bevor Nachrichten versendet werden können, muss noch der Bot definiert werden. Dies kann direkt im „sender“ node erfolgen indem man auf den bearbeiten-Button neben „Add new telegram bot…“ klickt. Hier nun den Botnamen (Zeile 1) und den API-Token (Zeile 2) eingeben (siehe Screenshot).\n"),t("img",{attrs:{src:"https://user-images.githubusercontent.com/44581521/50490693-bab8bd80-0a0e-11e9-98a8-52f478a31271.png",alt:""}})]),e._v(" "),t("p",[e._v("Der gesamte Flow schaut dann wie folgt aus:\n"),t("img",{attrs:{src:"https://user-images.githubusercontent.com/44581521/50490572-12a2f480-0a0e-11e9-87a5-598a16008ffc.png",alt:""}})]),e._v(" "),t("p",[e._v("Fertig.")]),e._v(" "),t("h3",{attrs:{id:"_4-weiterfuhrende-informationen-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-weiterfuhrende-informationen-2","aria-hidden":"true"}},[e._v("#")]),e._v(" 4) Weiterführende Informationen")]),e._v(" "),t("p",[e._v("Dieses System bietet viele weitere Möglichkeiten. Weiterführende Informationen kann man direkt bei Node-RED nachlesen:")]),e._v(" "),t("p",[e._v("https://flows.nodered.org/node/node-red-contrib-telegrambot")])])},[],!1,null,null,null);i.options.__file="Nachrichten-an-Telegram-versenden.md";n.default=i.exports}}]);