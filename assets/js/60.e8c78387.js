(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{201:function(e,t,a){"use strict";a.r(t);var s={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},n=a(6),r=Object(n.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.slotKey}},[a("h1",{attrs:{id:"fehleruberwachung-der-ccu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fehleruberwachung-der-ccu","aria-hidden":"true"}},[e._v("#")]),e._v(" Fehlerüberwachung der CCU")]),e._v(" "),a("p",[e._v("Treten Fehler in Programmen oder der Logik der CCU auf werden diese in "),a("code",[e._v("/var/log/messages")]),e._v(" geloggt. Der folgende Flow beschreibt eine Möglichkeit")]),e._v(" "),a("ul",[a("li",[e._v("die Fehler auszulesen")]),e._v(" "),a("li",[e._v("die Gesamtzahl der Fehler zu zählen und im Dashboard anzuzeigen")]),e._v(" "),a("li",[e._v("die letzten 20 Fehler ebenfalls in einem Log-Fenster im Dashboard anzuzeigen")]),e._v(" "),a("li",[e._v("nach Erreichen einer Warngrenze eine Email mit den letzten Fehlern zu versenden")])]),e._v(" "),a("p",[e._v("Neben den standardmäßig vorhandenen Nodes verwendet dieser Flow zusätzlich "),a("a",{attrs:{href:"https://www.npmjs.com/package/node-red-contrib-counter",target:"_blank",rel:"noopener noreferrer"}},[e._v("node-red-contrib-counter"),a("OutboundLink")],1),e._v(". Diese kann wie "),a("a",{attrs:{href:"https://github.com/hobbyquaker/RedMatic/wiki/Node-Installation",target:"_blank",rel:"noopener noreferrer"}},[e._v("hier beschrieben"),a("OutboundLink")],1),e._v(" installiert werden.")]),e._v(" "),a("h2",{attrs:{id:"flow-und-dashboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flow-und-dashboard","aria-hidden":"true"}},[e._v("#")]),e._v(" Flow und Dashboard")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/flow.png",alt:""}})]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/dash.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"konfiguration-der-einzelnen-nodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#konfiguration-der-einzelnen-nodes","aria-hidden":"true"}},[e._v("#")]),e._v(" Konfiguration der einzelnen Nodes")]),e._v(" "),a("h3",{attrs:{id:"tail-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tail-node","aria-hidden":"true"}},[e._v("#")]),e._v(" Tail Node")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/tail.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Überwacht "),a("code",[e._v("/var/log/messages")]),e._v(" auf Änderungen und gibt diese als "),a("code",[e._v("msg.payload")]),e._v(" aus")]),e._v(" "),a("li",[a("code",[e._v("Split lines on \\n?")]),e._v(" sorgt dafür, dass bei mehreren Zeilen, nur jeweile eine pro "),a("code",[e._v("msg")]),e._v(" ausgegeben wird")])]),e._v(" "),a("h3",{attrs:{id:"switch-node-filter-errors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#switch-node-filter-errors","aria-hidden":"true"}},[e._v("#")]),e._v(" Switch Node - Filter Errors")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/switch.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Lässt eine "),a("code",[e._v("msg")]),e._v(" nur passieren, wenn in deren Payload irgendwo "),a("code",[e._v("Error:")]),e._v(" vorkommt")]),e._v(" "),a("li",[a("code",[e._v("^.*Error\\:.*$")]),e._v(" ist ein sogenannter [https://de.wikipedia.org/wiki/Regul%C3%A4rer_Ausdruck](Regulärer Ausdruck) und prüft, ob in einem String neben beliebigen Zeichen auch die Zeichenfolge "),a("code",[e._v("Error:")]),e._v(" vorkommt.")])]),e._v(" "),a("h3",{attrs:{id:"count-node-count-errors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#count-node-count-errors","aria-hidden":"true"}},[e._v("#")]),e._v(" Count Node - Count Errors")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/count.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Zählt die Anzahl der ankommenden Nachrichten")]),e._v(" "),a("li",[e._v("Output 1: Eine Message mit dem jeweilgen Zählerstand als Payload")]),e._v(" "),a("li",[e._v("Output 2: Die eingegangene Nachricht wird einfach durchgeleitet (und um die Eigenschaft "),a("code",[e._v("msg.count")]),e._v(" als Zählerstand ergänzt)")])]),e._v(" "),a("h3",{attrs:{id:"join-node-prepare-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#join-node-prepare-message","aria-hidden":"true"}},[e._v("#")]),e._v(" Join Node - Prepare Message")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/join.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Sammelt die eingehenden "),a("code",[e._v("msg")]),e._v(" und fügt diese, bei Erreichen eines Grenzwerts, zu einer einzigen neuen Nachricht zusammen")]),e._v(" "),a("li",[e._v("Mit "),a("code",[e._v("\\r\\n")]),e._v(" in "),a("code",[e._v("joined using")]),e._v(" wird zwischen jeder Nachricht ein Windows-Zeilenumbruch eingefügt")]),e._v(" "),a("li",[a("code",[e._v("After a number of message parts")]),e._v(" gibt den Grenzwert an, bei dem diese Anzahl "),a("code",[e._v("msg")]),e._v(" zusammengefasst und ausgegeben wird")])]),e._v(" "),a("h3",{attrs:{id:"email-node-send-email"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#email-node-send-email","aria-hidden":"true"}},[e._v("#")]),e._v(" Email Node - Send Email")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/email.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Diese Node erzeugt und versendet eine Mail mit "),a("code",[e._v("msg.payload")]),e._v(" als Inhalt und "),a("code",[e._v("msg.topic")]),e._v(" als Betreff")]),e._v(" "),a("li",[a("code",[e._v("Server")]),e._v(" ist der Posteingangsserver der Mailadresse, von der die Nachricht versendet werden soll")]),e._v(" "),a("li",[a("code",[e._v("UserID")]),e._v(" ist der Benutzername des entsprechenden Mailkontos")]),e._v(" "),a("li",[a("code",[e._v("Password")]),e._v(" das zum Konto gehörende Passwort")])]),e._v(" "),a("h3",{attrs:{id:"gauge-node-show-error-count"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gauge-node-show-error-count","aria-hidden":"true"}},[e._v("#")]),e._v(" Gauge Node - Show Error Count")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/gauge.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Zeigt im Dashboard eine Zähluhr mit der Gesamtzahl der bisher aufgetretenen Fehler an")])]),e._v(" "),a("h3",{attrs:{id:"button-node-reset-error-count"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#button-node-reset-error-count","aria-hidden":"true"}},[e._v("#")]),e._v(" Button Node - Reset Error Count")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/button_reset_count.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Zeigt im Dashboard, direkt unter der Zähleruhr, einen Reset-Knopf an, mit dem der Zähler wieder auf Null gestellt werden kann")])]),e._v(" "),a("h3",{attrs:{id:"change-node-set-reset-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#change-node-set-reset-message","aria-hidden":"true"}},[e._v("#")]),e._v(" Change Node - Set Reset Message")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/change_reset_count.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Die Counter Node erwartet eine Nachricht mit der Eigenschaft "),a("em",[e._v("Reset")]),e._v(" ("),a("code",[e._v("msg.reset")]),e._v("), um den Zähler zu nullen.")]),e._v(" "),a("li",[e._v("Die Button Node kann diese Eigenschaft aber nicht erzeugen, also wird diese mit der Change Node gesetzt")]),e._v(" "),a("li",[e._v("Zusätzlich wird noch die "),a("em",[e._v("Topic")]),e._v(" Eigenschaft ("),a("code",[e._v("msg.topic")]),e._v(") gesetzt, um im Log die Aktion mit dem entsprechenden Topic anzeigen zu können")])]),e._v(" "),a("h3",{attrs:{id:"function-node-rotate-entries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-node-rotate-entries","aria-hidden":"true"}},[e._v("#")]),e._v(" Function Node - Rotate Entries")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/function.png",alt:""}})]),e._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[e._v("var")]),e._v(" dashboardLog "),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v(" context"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{attrs:{class:"token keyword"}},[e._v("get")]),a("span",{attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{attrs:{class:"token string"}},[e._v("'dashboardLog'")]),a("span",{attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{attrs:{class:"token operator"}},[e._v("||")]),e._v(" "),a("span",{attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n \ndashboardLog"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{attrs:{class:"token function"}},[e._v("push")]),a("span",{attrs:{class:"token punctuation"}},[e._v("(")]),e._v("msg"),a("span",{attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),a("span",{attrs:{class:"token punctuation"}},[e._v("(")]),e._v("dashboardLog"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),e._v("length "),a("span",{attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{attrs:{class:"token number"}},[e._v("20")]),a("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{attrs:{class:"token comment"}},[e._v("// Delete oldest message if > 20")]),e._v("\n    dashboardLog"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{attrs:{class:"token function"}},[e._v("shift")]),a("span",{attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    dashboardLog"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),e._v("length "),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{attrs:{class:"token number"}},[e._v("20")]),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" \n\n"),a("span",{attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),a("span",{attrs:{class:"token punctuation"}},[e._v("(")]),e._v("msg"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),e._v("resetlog"),a("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    dashboardLog "),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n \n"),a("span",{attrs:{class:"token comment"}},[e._v("// store the value back")]),e._v("\ncontext"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{attrs:{class:"token keyword"}},[e._v("set")]),a("span",{attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{attrs:{class:"token string"}},[e._v("'dashboardLog'")]),a("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v("dashboardLog"),a("span",{attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n \n"),a("span",{attrs:{class:"token comment"}},[e._v("// make it part of the outgoing msg object")]),e._v("\nmsg "),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nmsg"),a("span",{attrs:{class:"token punctuation"}},[e._v(".")]),e._v("payload "),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v(" dashboardLog"),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{attrs:{class:"token keyword"}},[e._v("return")]),e._v(" msg"),a("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br")])]),a("ul",[a("li",[e._v("Funktion: Dieses Javascript erzeugt eine separaten Speicher (sog. "),a("code",[e._v("context")]),e._v("), in dem jede ankommende Nachricht gespeichert wird")]),e._v(" "),a("li",[e._v("Nach 20 Nachrichten wird die älteste Nachricht aus dem Speicher entfernt, so dass rotierend immer die 20 aktuellsten Nachrichten vorgehalten werden")]),e._v(" "),a("li",[e._v("Wird eine Nachricht mit der Eigenschaft "),a("code",[e._v("msg.resetlog")]),e._v(" empfangen wird der gesamte Speicher geleert")])]),e._v(" "),a("h3",{attrs:{id:"template-node-dashlog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#template-node-dashlog","aria-hidden":"true"}},[e._v("#")]),e._v(" Template Node - DashLog")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/template.png",alt:""}})]),e._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("<")]),e._v("ul")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("<")]),e._v("li")]),e._v(" "),a("span",{attrs:{class:"token attr-name"}},[e._v("ng-repeat")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("=")]),a("span",{attrs:{class:"token punctuation"}},[e._v('"')]),e._v("x in msg.payload"),a("span",{attrs:{class:"token punctuation"}},[e._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("<")]),e._v("font")]),e._v(" "),a("span",{attrs:{class:"token attr-name"}},[e._v("color")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("=")]),a("span",{attrs:{class:"token punctuation"}},[e._v('"')]),e._v("red"),a("span",{attrs:{class:"token punctuation"}},[e._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("{{x.topic}}"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("</")]),e._v("font")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("<")]),e._v("ul")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n        "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("<")]),e._v("li")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("{{x.payload}}"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("</")]),e._v("li")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("</")]),e._v("ul")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("</")]),e._v("li")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[e._v("</")]),e._v("ul")]),a("span",{attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br")])]),a("ul",[a("li",[e._v("Funktion: Erzeugt im Dashboard eine Aufzählung die jeweils aus den Eigenschaften "),a("code",[e._v("msg.topic")]),e._v(" und "),a("code",[e._v("msg.payload")]),e._v(" besteht")]),e._v(" "),a("li",[e._v("Die Liste zeigt immer den gesamten Inhalt des, in der "),a("code",[e._v("Rotate Entries")]),e._v(" Node erzeugten, Speichers an")])]),e._v(" "),a("h3",{attrs:{id:"button-node-clear-dashlog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#button-node-clear-dashlog","aria-hidden":"true"}},[e._v("#")]),e._v(" Button Node - Clear DashLog")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/button_reset_count.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Zeigt im Dashboard direkt unter dem DashLog einen Reset-Knopf an, mit dem der Inhalt des Logs gelöscht wird")])]),e._v(" "),a("h3",{attrs:{id:"change-node-set-reset-message-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#change-node-set-reset-message-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Change Node - Set Reset Message")]),e._v(" "),a("p",[a("img",{attrs:{src:"images/errorlog/change_reset_log.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Funktion: Die "),a("code",[e._v("Rotate Entries")]),e._v(" Node erwartet eine Nachricht mit der Eigenschaft "),a("code",[e._v("msg.resetlog")]),e._v(", um das Log zu löschen")]),e._v(" "),a("li",[e._v("Die vorangegangene Button Node kann diese Eigenschaft aber nicht erzeugen, also wird diese mit der Change Node gesetzt")])]),e._v(" "),a("h2",{attrs:{id:"flow-quelltext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flow-quelltext","aria-hidden":"true"}},[e._v("#")]),e._v(" Flow Quelltext")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[{"id":"50104e94.8152b8","type":"tab","label":"Error Monitoring","disabled":false,"info":""},{"id":"5d48d65c.e24b48","type":"tail","z":"50104e94.8152b8","name":"","filetype":"text","split":true,"filename":"/var/log/messages","x":130,"y":200,"wires":[["6595e35d.530f24"]]},{"id":"6595e35d.530f24","type":"switch","z":"50104e94.8152b8","name":"Filter Errors","property":"payload","propertyType":"msg","rules":[{"t":"regex","v":"^.*Error\\\\:.*$","vt":"str","case":true}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":200,"wires":[["e9d593c5.3deb1"]]},{"id":"e9d593c5.3deb1","type":"counter","z":"50104e94.8152b8","name":"Count Errors","init":"0","step":"1","lower":"","upper":"","mode":"increment","outputs":2,"x":510,"y":200,"wires":[["253f1e33.ae4aea"],["ba691feb.d30d08","bd901793.899028"]]},{"id":"253f1e33.ae4aea","type":"ui_gauge","z":"50104e94.8152b8","name":"Show Error Count","group":"d79a8eea.a905c","order":0,"width":"6","height":"4","gtype":"gage","title":"Anzahl Fehler","label":"Fehler","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":710,"y":140,"wires":[]},{"id":"ba691feb.d30d08","type":"function","z":"50104e94.8152b8","name":"Rotate Entries","func":"var dashboardLog = context.get(\'dashboardLog\')|| [];\\n \\ndashboardLog.push(msg);\\nif (dashboardLog.length > 20) {\\n    // Delete oldest message if > 20\\n    dashboardLog.shift();\\n    dashboardLog.length = 20;\\n} \\n\\nif (msg.resetlog) {\\n    dashboardLog = [];\\n}\\n \\n// store the value back\\ncontext.set(\'dashboardLog\',dashboardLog);\\n \\n// make it part of the outgoing msg object\\nmsg = {};\\nmsg.payload = dashboardLog;\\nreturn msg;","outputs":1,"noerr":0,"x":700,"y":260,"wires":[["f4ef2a5d.f01c18"]]},{"id":"bd901793.899028","type":"join","z":"50104e94.8152b8","name":"Prepare Message","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\\\r\\\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":710,"y":200,"wires":[["2e0650.3ce4e9b"]]},{"id":"f4ef2a5d.f01c18","type":"ui_template","z":"50104e94.8152b8","group":"2bf72e51.a156aa","name":"DashLog","order":0,"width":"6","height":"4","format":"<ul>\\n <li ng-repeat=\\"x in msg.payload\\">\\n <font color=\\"red\\">{{x.topic}}</font>\\n    <ul>\\n        <li>{{x.payload}}</li>\\n    </ul>\\n </li>\\n</ul>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":900,"y":260,"wires":[[]]},{"id":"2e0650.3ce4e9b","type":"e-mail","z":"50104e94.8152b8","server":"smtp.gmail.com","port":"465","secure":true,"name":"","dname":"Send Email","x":910,"y":200,"wires":[]},{"id":"b8d3f654.c03e9","type":"comment","z":"50104e94.8152b8","name":"Fehlerüberwachung","info":"* Überwacht /var/log/messages\\n* Zeigt die letzten 20 Fehler in einem Log-Fenster\\n* Zeigt die Gesamtzahl der Fehler\\n* Schickt Email nach 5 Fehlern mit Fehlerprotokoll","x":130,"y":60,"wires":[]},{"id":"df87c0fb.d4ab68","type":"ui_button","z":"50104e94.8152b8","name":"Reset Error Count","group":"d79a8eea.a905c","order":0,"width":0,"height":0,"passthru":false,"label":"Reset","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":130,"y":140,"wires":[["4d33d56a.36fafc"]]},{"id":"4d33d56a.36fafc","type":"change","z":"50104e94.8152b8","name":"Set Reset Message","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"topic","pt":"msg","to":"Reset Error Count","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":140,"wires":[["e9d593c5.3deb1"]]},{"id":"72b39289.830fcc","type":"ui_button","z":"50104e94.8152b8","name":"Clear DashLog","group":"2bf72e51.a156aa","order":0,"width":0,"height":0,"passthru":false,"label":"Clear DashLog","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":120,"y":260,"wires":[["cdbca45f.b62868"]]},{"id":"cdbca45f.b62868","type":"change","z":"50104e94.8152b8","name":"Set Reset Message","rules":[{"t":"set","p":"resetlog","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":260,"wires":[["ba691feb.d30d08"]]},{"id":"d79a8eea.a905c","type":"ui_group","z":"","name":"Error Count","tab":"a5b5c3f2.ffeeb8","disp":true,"width":"6","collapse":false},{"id":"2bf72e51.a156aa","type":"ui_group","z":"","name":"DashLog","tab":"a5b5c3f2.ffeeb8","disp":true,"width":"6","collapse":false},{"id":"a5b5c3f2.ffeeb8","type":"ui_tab","z":"","name":"Error Log","icon":"dashboard"}]\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])},[],!1,null,null,null);r.options.__file="Flow-Syslog.md";t.default=r.exports}}]);